(this["webpackJsonpwork-time-helper"]=this["webpackJsonpwork-time-helper"]||[]).push([[0],{46:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n,r=a(10),i=a.n(r),c=function(e){return e.timeReducer},o=function(e){return e.viewReducer},s=function(e){return e.counterEditorReducer},l=a(4),u="workTimeHelper",d=a(28),b=function e(t){var a,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Array.isArray(t),i=t instanceof Date,c=v(t);if(i)return new Date(t);if(!n){if(r)return Object(d.a)(t);if(c)return Object(l.a)({},t)}return r||c?r?(a=[],t.forEach((function(t){return a.push(e(t,n))})),a):(a={},Object.keys(t).forEach((function(r){return a[r]=e(t[r],n)})),a):t},v=function(e){return"object"===typeof e&&!Array.isArray(e)&&null!==e&&!(e instanceof Date)},j=function(e){return Math.floor(e/60)},O=function(e,t,a,n,r){var i;if(i="function"===typeof t?Object(l.a)(Object(l.a)({},e),t(e)):Object(l.a)(Object(l.a)({},e),t),n){var c=JSON.parse(localStorage.getItem(n)||"{}");localStorage.setItem(n,JSON.stringify(Object(l.a)(Object(l.a)({},c),i)))}else a.forEach((function(e){return localStorage.setItem("".concat(e),JSON.stringify(i[e]))}));null===r||void 0===r||r(i)},p=function(e,t,a){var n={};if(a){var r=JSON.parse(localStorage.getItem(a));r&&Object.keys(t||r).forEach((function(e){null!==r[e]&&void 0!==r[e]&&(n[e]=r[e])}))}else e.forEach((function(e){var t=JSON.parse(localStorage.getItem("".concat(e)));null!==t&&void 0!==t&&(n[e]=t)}));return t&&Object.keys(t).forEach((function(e){var a;return n[e]=null!==(a=n[e])&&void 0!==a?a:t[e]})),n},f=function(e,t){if("minutes"===t)return"".concat(e<0?"- ":"").concat(Math.abs(e));var a=e>=0?"floor":"ceil",n=Math[a](e%60),r=Math[a](e/60),i=n<0||r<0?"- ":"",c="".concat(Math.abs(n)),o="".concat(Math.abs(r));return"".concat(i).concat(1===o.length?"0"+o:o," : ").concat(1===c.length?"0"+c:c)};!function(e){e.DOWNLOAD_SETTINGS="uploadSettings",e.SET_IS_ACTIVE="setIsActive",e.SET_MULTIPLIER="setMultiplier",e.SET_STARTS_FROM="setStartsFrom"}(n||(n={}));var m,h={isActive:!0,multiplier:100,startsFrom:0},y={editorsSettings:{}},g={setMultiplier:function(e){var t=e.id,a=e.value;return{type:n.SET_MULTIPLIER,payload:{id:t,value:a}}},setIsActive:function(e){var t=e.id,a=e.value;return{type:n.SET_IS_ACTIVE,payload:{id:t,value:a}}},setStartsFrom:function(e){var t=e.id,a=e.value;return{type:n.SET_STARTS_FROM,payload:{id:t,value:a}}},downloadSettings:function(e){var t=e.value;return{type:n.DOWNLOAD_SETTINGS,payload:{value:t}}}};!function(e){e.WORK_DAY_LENGTH_CHANGE="workDayLengthChange",e.IMPORT_DATA="importData"}(m||(m={}));var T,S,x={setWorkDayLength:function(e){return{type:m.WORK_DAY_LENGTH_CHANGE,payload:e}},importData:function(){return{type:m.IMPORT_DATA}}},k=a(13),E=(T={},Object(k.a)(T,m.WORK_DAY_LENGTH_CHANGE,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{workDayLength:t})})),Object(k.a)(T,m.IMPORT_DATA,(function(e){return Object(l.a)(Object(l.a)({},e),{},{countersData:JSON.parse(localStorage.getItem("counters"))})})),T),A={workDayLength:480};!function(e){e.REMAINDER_CHANGE="remainderChange"}(S||(S={}));var D={setRemainderType:function(){return{type:S.REMAINDER_CHANGE}}},N={remainderViewType:"minutes"},w=Object(l.a)(Object(l.a)(Object(l.a)({},A),N),y),_={timeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;if(!E[t.type])return Object(l.a)({},e);var a=E[t.type](b(e,!0),t.payload);return O(e,a,Object.keys(A),u),a},viewReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0,a=Object(l.a)({},e);switch(t.type){case S.REMAINDER_CHANGE:a.remainderViewType="minutes"===e.remainderViewType?"hours":"minutes";break;default:return Object(l.a)({},e)}return O(e,a,Object.keys(N),u),Object(l.a)({},a)},counterEditorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,a=Object(l.a)({},e);switch(t.type){case n.DOWNLOAD_SETTINGS:a=p(Object.keys(y),y,u),Object.values(t.payload.value.data||{}).forEach((function(e){var t=e.name;a.editorsSettings[t]||(a.editorsSettings[t]=Object(l.a)({},h))}));break;case n.SET_IS_ACTIVE:a.editorsSettings[t.payload.id].isActive=t.payload.value;break;case n.SET_MULTIPLIER:a.editorsSettings[t.payload.id].multiplier=t.payload.value;break;case n.SET_STARTS_FROM:a.editorsSettings[t.payload.id].startsFrom=t.payload.value;break;default:return Object(l.a)({},e)}return O(e,a,Object.keys(y),u),b(a,!0)}},I=Object(l.a)(Object(l.a)(Object(l.a)({},x),D),g),R=a(15),M=a(12),L=a(1),C=function(){var e=Object(M.b)();return Object(L.useMemo)((function(){return Object(R.a)(I,e)}),[e])},F=M.c,G=a(19),H=a(2),V=function(e){var t=e.children,a=F(s).editorsSettings,n=F(c).countersData,r=C(),i=r.importData,o=r.downloadSettings;return Object(L.useEffect)((function(){i()}),[i]),Object(L.useEffect)((function(){n&&o({value:n})}),[n,o]),Object.keys(a).length?Object(H.jsx)("div",{className:"w-100 content-container",children:t}):Object(H.jsx)(H.Fragment,{})},W=a(18),J=a(49),P=a(50),K=a(51),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"number"},t=e.labelText,a=e.children,n=e.id,r=e.value,i=e.className,c=Object(W.a)(e,["labelText","children","id","value","className"]);return Object(H.jsxs)(J.a,{className:i,children:[Object(H.jsx)(P.a,{for:n,children:t}),Object(H.jsx)(K.a,Object(l.a)({name:n,id:n,value:r||0===r?r:""},c)),a]})},Y=a(52),q=function(e){var t=F(c),a=t.workDayLength,n=t.countersData,r=F(s).editorsSettings,i=F(o).remainderViewType;return Object(H.jsx)("div",Object(l.a)(Object(l.a)({},e),{},{children:Object(H.jsxs)(Y.a,{className:"position-relative",children:[Object(H.jsx)(U,{id:"totalWorkTime",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f \u0432\u044b\u0448\u0435 \u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u0440\u0430\u0441\u0441\u0447\u0451\u0442",labelText:"\u0412\u0441\u0435\u0433\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c",value:Object(L.useMemo)((function(){return f(function(e){var t=e.workDayLength,a=e.countersData,n=e.editorsSettings,r=void 0===n?{}:n;if(!(null===a||void 0===a?void 0:a.data)||!Object.keys(r).length)return 0;if(!t)return 0;var i=0;return Object.values(a.data).forEach((function(e){var t,a,n;(null===r||void 0===r||null===(t=r[e.name])||void 0===t?void 0:t.isActive)&&i<(null===r||void 0===r||null===(a=r[e.name])||void 0===a?void 0:a.multiplier)&&(i=null===r||void 0===r||null===(n=r[e.name])||void 0===n?void 0:n.multiplier)})),Math.min(t/(i/100),t)}({workDayLength:a,countersData:n,editorsSettings:r}),i)}),[a,n,i,r]),disabled:!0,readOnly:!0}),Object(H.jsx)(U,{id:"totalWorkTime",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f \u0432\u044b\u0448\u0435 \u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u0440\u0430\u0441\u0441\u0447\u0451\u0442",labelText:"\u0423\u0436\u0435 \u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043e \u0432 \u043f\u0435\u0440\u0435\u0441\u0447\u0435\u0442\u0435 \u043d\u0430 \u0434\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0440\u0430\u0431\u043e\u0447\u0435\u0433\u043e \u0434\u043d\u044f",value:Object(L.useMemo)((function(){return f(function(e){var t=e.workDayLength,a=e.countersData,n=e.editorsSettings,r=void 0===n?{}:n;if(!t)return 0;if(!(null===a||void 0===a?void 0:a.data)||!Object.keys(r).length)return t;var i=0;return Object.values(a.data).forEach((function(e){var t,a,n;(null===r||void 0===r||null===(t=r[e.name])||void 0===t?void 0:t.isActive)&&(i+=(j(e.savedTime)-(null===r||void 0===r||null===(a=r[e.name])||void 0===a?void 0:a.startsFrom))*((null===r||void 0===r||null===(n=r[e.name])||void 0===n?void 0:n.multiplier)/100))})),Math.floor(i)}({workDayLength:a,countersData:n,editorsSettings:r}),i)}),[a,n,i,r]),disabled:!0,readOnly:!0})]})}))},B=a(54),z=function(e){var t=e.className,a=C(),n=a.setWorkDayLength,r=a.setRemainderType,i=a.importData,o=F(c).workDayLength,s=Object(L.useCallback)((function(e){var t=e.target.value;return n(+t)}),[n]);return Object(H.jsxs)("div",{className:"p-3 position-relative ".concat(t),children:[Object(H.jsx)("span",{className:"position-absolute",title:"\u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435",style:{top:5,right:10,cursor:"pointer"},onClick:i,children:"\u2702"}),Object(H.jsx)("span",{className:"position-absolute",title:"\u0441\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043a\u0430\u0437\u0430 \u0432\u0440\u0435\u043c\u0435\u043d\u0438",style:{top:5,right:35,cursor:"pointer"},onClick:r,children:"\u267e"}),Object(H.jsx)(Y.a,{children:Object(H.jsx)(U,{id:"workTimeLength",labelText:"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0440\u0430\u0431\u043e\u0447\u0435\u0433\u043e \u0434\u043d\u044f",placeholder:"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0440\u0430\u0431\u043e\u0447\u0435\u0433\u043e \u0434\u043d\u044f",value:o,onChange:s})})]})},Q=a(55),X=a(53),Z=function(e){var t=e.isOpened,a=e.setIsOpened,n=e.id,r=C(),i=r.setIsActive,c=r.setMultiplier,o=r.setStartsFrom,l=F(s).editorsSettings,u=l[n],d=Object(L.useCallback)((function(){var e;return i({id:n,value:!(null===(e=l[n])||void 0===e?void 0:e.isActive)})}),[i,n,l]),b=Object(L.useCallback)((function(e){var t=e.target.value;return c({id:n,value:+t})}),[c,n]),v=Object(L.useCallback)((function(e){var t=e.target.value;return o({id:n,value:+t})}),[o,n]);return Object(H.jsx)("div",{children:Object(H.jsx)(Q.a,{isOpen:t,toggle:a,children:Object(H.jsxs)(X.a,{children:[Object(H.jsxs)(J.a,{className:"pb-3",children:[Object(H.jsx)(K.a,{type:"checkbox",id:"isActive",className:"",onChange:d,checked:u.isActive}),Object(H.jsx)(P.a,{for:"isActive",style:{marginLeft:"10px"},children:"Active"})]}),Object(H.jsx)(U,{id:"\u041c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c",labelText:"\u041c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c %",type:"number",value:u.multiplier,onChange:b}),Object(H.jsx)(U,{id:"\u041d\u0430\u0447\u0438\u043d\u0430\u0435\u043c \u0441",labelText:"\u041d\u0430\u0447\u0438\u043d\u0430\u0435\u043c \u0441",type:"number",value:u.startsFrom,onChange:v})]})})})},$=function(e){var t=Object.assign({},e),a=Object(L.useState)(""),n=Object(G.a)(a,2),r=n[0],i=n[1],s=F(c).countersData,u=F(o).remainderViewType,d=Object(L.useCallback)((function(e){return i((function(t){return t?"":e}))}),[i]),b=Object(L.useMemo)((function(){return Object.values((null===s||void 0===s?void 0:s.data)||{}).map((function(e){return Object(H.jsx)(U,{id:e.name,labelText:e.name,value:f(j(e.savedTime),u),className:"position-relative",disabled:!0,children:Object(H.jsx)("span",{className:"position-absolute",title:"\u0441\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043a\u0430\u0437\u0430 \u0432\u0440\u0435\u043c\u0435\u043d\u0438",style:{top:30,right:10,cursor:"pointer"},onClick:function(){return d(e.name)},children:"\u270e"})},e.name+e.savedTime)}))}),[s,u,d]);return Object(H.jsxs)("div",Object(l.a)(Object(l.a)({},t),{},{children:[b,r?Object(H.jsx)(Z,{isOpened:Boolean(r),setIsOpened:d,id:r}):Object(H.jsx)(H.Fragment,{})]}))},ee=(a(46),function(){return Object(H.jsx)(B.a,{fluid:!0,className:"bg-dark d-flex justify-content-center",style:{minHeight:"100vh",padding:"70px 3rem 20px"},children:Object(H.jsxs)(V,{children:[Object(H.jsx)(z,{className:"p-3 position-relative bg-white"}),Object(H.jsx)($,{className:"p-3 mt-5 bg-white"}),Object(H.jsx)(q,{className:"p-3 mt-5 bg-white"})]})})}),te=Object(R.b)(_),ae=p(Object.keys(w),w,u),ne=ae.remainderViewType,re=Object(W.a)(ae,["remainderViewType"]),ie=Object(R.c)(te,{timeReducer:re,viewReducer:{remainderViewType:ne}});a(47);i.a.render(Object(H.jsx)(M.a,{store:ie,children:Object(H.jsx)(ee,{})}),document.querySelector("#root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.a9b69a75.chunk.js.map