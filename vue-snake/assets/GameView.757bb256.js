import{C as S,m as a,_ as l,o as n,c as s,r as h,F as m,n as p,a as $,b as u,d as k,e as _}from"./index.9732f50b.js";const f=({locations:e,squareSize:t},r={})=>e.map(i=>({position:"absolute",width:`${t}px`,height:`${t}px`,background:"red",left:`${t*i[S.x]}px`,top:`${t*i[S.y]}px`,...r})),v={props:{location:{required:!0,type:Array}},data:()=>({styles:[]}),mounted(){this.styles=this.getStyles()},beforeUpdate(){this.styles=this.getStyles()},methods:{getStyles(){return f({locations:this.location,squareSize:this.squareSize},{zIndex:1})}},computed:{...a({squareSize:e=>e.snake.squareSize})}};function z(e,t,r,i,d,c){return n(!0),s(m,null,h(e.styles,o=>(n(),s("div",{style:p(o)},null,4))),256)}var w=l(v,[["render",z]]);const b={components:{Snake:w},data:()=>({timerId:null}),beforeMount(){this.initLocation()},mounted(){this.handleListeners("addEventListener"),this.updateLocation()},beforeUpdate(){this.updateLocation()},beforeUnmount(){this.handleListeners("removeEventListener"),this.clearTimer()},methods:{...$({setLocation:"snake/setLocation",setDirection:"snake/setDirection",rerenderFeed:"commonStore/rerenderFeed",moveSnake:"commonStore/moveSnake"}),updateLocation(){this.clearTimer(),this.timerId=setTimeout(()=>this.moveSnake(),1e3)},clearTimer(){this.timerId&&clearTimeout(this.timerId)},handleListeners(e){document[e]("keydown",this.listenersController)},listenersController(e){let t;switch(e.key){case"ArrowUp":t="up";break;case"ArrowDown":t="down";break;case"ArrowRight":t="right";break;case"ArrowLeft":t="left";break}t&&(e.preventDefault(),this.direction===t?this.moveSnake():this.setDirection(t))},initLocation(){this.setLocation([[Math.floor(this.lineSize/2),Math.floor(this.lineSize/2)]])}},computed:{...a({totalSquares:e=>e.snake.totalSquares,lineSize:e=>e.snake.lineSize,fieldSize:e=>e.snake.fieldSize,location:e=>e.snake.location,direction:e=>e.snake.direction})}};function F(e,t,r,i,d,c){const o=u("Snake");return n(),k(o,{location:e.location},null,8,["location"])}var L=l(b,[["render",F]]);const g={props:{location:{type:Array,required:!0}},data:()=>({styles:{}}),mounted(){this.styles=f({locations:this.location,squareSize:this.squareSize},{background:"yellow"})},beforeUpdate(){this.styles=f({locations:this.location,squareSize:this.squareSize},{background:"yellow"})},computed:{...a({squareSize:e=>e.snake.squareSize})}};function q(e,t,r,i,d,c){return n(!0),s(m,null,h(e.styles,o=>(n(),s("div",{style:p(o)},null,4))),256)}var x=l(g,[["render",q]]);const C={computed:{...a({location:e=>e.feed.location})},components:{Feed:x},beforeMount(){this.rerenderFeed()},methods:{...$({rerenderFeed:"commonStore/rerenderFeed"})}};function A(e,t,r,i,d,c){const o=u("Feed");return n(),k(o,{location:e.location},null,8,["location"])}var D=l(C,[["render",A]]);const I={components:{SnakeController:L,FeedController:D},data:()=>({oneLineFields:[]}),computed:{...a({lineSize:e=>e.snake.lineSize,fieldSize:e=>e.snake.fieldSize,squareSize:e=>e.snake.squareSize})},beforeMount(){this.oneLineFields=new Array(this.lineSize).fill("")}};function M(e,t,r,i,d,c){const o=u("SnakeController"),y=u("FeedController");return n(),s("div",{class:"wrapper",style:p({height:`${e.fieldSize}px`,width:`${e.fieldSize}px`})},[(n(!0),s(m,null,h(e.oneLineFields,V=>(n(),s("div",{class:"line",style:p({height:`${e.squareSize}px`})},[(n(!0),s(m,null,h(e.oneLineFields,G=>(n(),s("div",{class:"field",style:p({width:`${e.squareSize}px`})},null,4))),256))],4))),256)),_(o),_(y)],4)}var T=l(I,[["render",M],["__scopeId","data-v-6bf640d1"]]);const U={components:{Field:T},computed:{...a({phase:e=>e.phase.phase})},watch:{phase(){this.phase==="end"&&this.$router.push("/end")}}},B={class:"wrapper"};function E(e,t,r,i,d,c){const o=u("Field");return n(),s("div",B,[_(o)])}var R=l(U,[["render",E]]);export{R as default};
