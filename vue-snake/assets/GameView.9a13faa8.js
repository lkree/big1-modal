import{C as $,m as l,_ as d,o as n,c as s,r as m,F as h,n as u,a as k,b as a,d as v,e as _}from"./index.0fe80b4c.js";import{B as y}from"./BackButton.4d222426.js";const S=({locations:e,squareSize:t},r={})=>e.map(i=>({position:"absolute",width:`${t}px`,height:`${t}px`,background:"red",left:`${t*i[$.x]}px`,top:`${t*i[$.y]}px`,...r})),z={props:{location:{required:!0,type:Array}},data:()=>({styles:[]}),mounted(){this.styles=this.getStyles()},beforeUpdate(){this.styles=this.getStyles()},methods:{getStyles(){return S({locations:this.location,squareSize:this.squareSize},{zIndex:1})}},computed:{...l({squareSize:e=>e.settings.squareSize})}};function g(e,t,r,i,c,p){return n(!0),s(h,null,m(e.styles,o=>(n(),s("div",{style:u(o)},null,4))),256)}var b=d(z,[["render",g]]);const w={components:{Snake:b},data:()=>({timerId:null}),beforeMount(){this.initLocation()},mounted(){this.handleListeners("addEventListener"),this.updateLocation()},beforeUpdate(){this.updateLocation()},beforeUnmount(){this.handleListeners("removeEventListener"),this.clearTimer()},methods:{...k({setLocation:"snake/setLocation",setDirection:"snake/setDirection",rerenderFeed:"commonStore/rerenderFeed",moveSnake:"commonStore/moveSnake"}),updateLocation(){this.clearTimer(),this.timerId=setTimeout(()=>this.moveSnake(),this.speed)},clearTimer(){this.timerId&&clearTimeout(this.timerId)},handleListeners(e){document[e]("keydown",this.listenersController)},listenersController(e){let t;switch(e.key){case"ArrowUp":t="up";break;case"ArrowDown":t="down";break;case"ArrowRight":t="right";break;case"ArrowLeft":t="left";break}t&&(e.preventDefault(),this.direction===t?this.moveSnake():this.setDirection(t))},initLocation(){this.setLocation([[Math.floor(this.lineSize/2),Math.floor(this.lineSize/2)]])}},computed:{...l({totalSquares:e=>e.settings.totalSquares,lineSize:e=>e.settings.lineSize,fieldSize:e=>e.settings.fieldSize,location:e=>e.snake.location,direction:e=>e.snake.direction,speed:e=>e.settings.snakeSpeed})}};function F(e,t,r,i,c,p){const o=a("Snake");return n(),v(o,{location:e.location},null,8,["location"])}var L=d(w,[["render",F]]);const q={props:{location:{type:Array,required:!0}},data:()=>({styles:{}}),mounted(){this.styles=S({locations:this.location,squareSize:this.squareSize},{background:"yellow"})},beforeUpdate(){this.styles=S({locations:this.location,squareSize:this.squareSize},{background:"yellow"})},computed:{...l({squareSize:e=>e.settings.squareSize})}};function x(e,t,r,i,c,p){return n(!0),s(h,null,m(e.styles,o=>(n(),s("div",{style:u(o)},null,4))),256)}var B=d(q,[["render",x]]);const C={computed:{...l({location:e=>e.feed.location})},components:{Feed:B},beforeMount(){this.rerenderFeed()},methods:{...k({rerenderFeed:"commonStore/rerenderFeed"})}};function A(e,t,r,i,c,p){const o=a("Feed");return n(),v(o,{location:e.location},null,8,["location"])}var D=d(C,[["render",A]]);const I={components:{SnakeController:L,FeedController:D},data:()=>({oneLineFields:[]}),computed:{...l({lineSize:e=>e.settings.lineSize,fieldSize:e=>e.settings.fieldSize,squareSize:e=>e.settings.squareSize})},beforeMount(){this.oneLineFields=new Array(this.lineSize).fill("")}};function M(e,t,r,i,c,p){const o=a("SnakeController"),f=a("FeedController");return n(),s("div",{class:"wrapper",style:u({height:`${e.fieldSize}px`,width:`${e.fieldSize}px`})},[(n(!0),s(h,null,m(e.oneLineFields,V=>(n(),s("div",{class:"line",style:u({height:`${e.squareSize}px`})},[(n(!0),s(h,null,m(e.oneLineFields,G=>(n(),s("div",{class:"field",style:u({width:`${e.squareSize}px`})},null,4))),256))],4))),256)),_(o),_(f)],4)}var T=d(I,[["render",M],["__scopeId","data-v-022358de"]]);const U={components:{BackButton:y,Field:T},computed:{...l({phase:e=>e.phase.phase})},watch:{phase(){(this.phase==="end"||this.phase==="win")&&this.$router.push("/end")}}};function E(e,t,r,i,c,p){const o=a("BackButton"),f=a("Field");return n(),s(h,null,[_(o,{class:"backBtn"}),_(f)],64)}var N=d(U,[["render",E],["__scopeId","data-v-40098bd4"]]);export{N as default};
