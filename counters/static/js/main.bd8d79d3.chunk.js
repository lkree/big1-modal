(this["webpackJsonpnew-counter-ts"]=this["webpackJsonpnew-counter-ts"]||[]).push([[0],{57:function(e,t,a){},83:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n,c=a(4),r=a(18),s=a.n(r),o=a(1),u=a(5),i=a(2);!function(e){e[e.Playing=0]="Playing",e[e.Pause=1]="Pause"}(n||(n={}));var d,j,O={name:"\u0431\u0435\u0437 \u0438\u043c\u0435\u043d\u0438",state:n.Pause,value:{seconds:0,minutes:0,hours:0},intervalId:null};(j=d||(d={})).Single="single",j.Multi="multi";var l,b={counters:{ids:[],data:{}},oldCounters:{ids:[],data:{}},mode:d.Multi,usedNames:[]},E=function(e){var t=e.seconds+1,a=e.minutes,n=e.hours;return t>=60&&(t=0,a+=1),a>=60&&(a=0,n+=1),{seconds:t,minutes:a,hours:n}},m=Object(i.createContext)([b,function(e){}]),f=a(87),p=a(88);!function(e){e.STOP="stop",e.PLAY="play",e.PAUSE="pause",e.UPDATE_TIME="updateTime",e.CREATE_COUNTER="createCounter",e.SET_INTERVAL_ID="setIntervalId",e.DELETE_AND_MOVE_TO_TABLE="deleteAndMoveToTable",e.CHANGE_NAME_FROM_EXIST="changeNameFromExist",e.CHANGE_NAME_FROM_DELETED="changeNameFromDeleted",e.DELETE_FROM_TABLE="deleteFromTable",e.CHANGE_MODE="changeMode",e.RESTORE_FROM_TABLE="restoreFromTable",e.ADD_TO_USED_NAMES="addToUsedNames",e.DELETE_FROM_USED_NAMES="deleteFromUsedNames",e.CHANGE_TIME="changeTime"}(l||(l={}));a(57);var x=function(e){var t=e.data,a=Object(i.useContext)(m),n=Object(u.a)(a,2)[1],r=t.id,s=t.name,o=t.value,d=o.hours,j=o.minutes,O=o.seconds;return Object(c.jsxs)("div",{className:"oldCounterItem d-flex p-3 border-bottom align-items-center",children:[Object(c.jsx)("p",{className:"oldCounterItem__item text-white",children:Object(c.jsx)("input",{type:"text",className:"w-100 text-white",title:s,value:s,style:{background:"transparent",border:"none",textOverflow:"ellipsis"},onBlur:function(e){var t=e.target.value;return n({type:l.ADD_TO_USED_NAMES,payload:t})},onChange:function(e){return function(e,t){var a=e.target.value;return n({type:l.CHANGE_NAME_FROM_DELETED,id:t,payload:a})}(e,r)}})}),Object(c.jsxs)("p",{className:"oldCounterItem__item oldCounterItem__item--time text-white",children:[d," : ",j," : ",O]}),Object(c.jsx)("p",{className:"oldCounterItem__item oldCounterItem__item--action",onClick:function(){return function(e){return n({type:l.RESTORE_FROM_TABLE,id:e})}(r)},children:"\u2692"}),Object(c.jsx)("p",{className:"oldCounterItem__item oldCounterItem__item--action text-danger",onClick:function(){return function(e){return n({type:l.DELETE_FROM_TABLE,id:e})}(r)},children:"\xd7"})]})},v=a(86),_=function e(t){var a=t.name,n=t.data,r=Object(i.useState)(!1),s=Object(u.a)(r,2),o=s[0],d=s[1];return Object(c.jsxs)("div",{className:"bg-dark pt-1 pb-1 pl-3 pr-3",children:[Object(c.jsx)("div",{className:"text-white",onClick:function(e){e.stopPropagation(),d((function(e){return!e}))},children:a}),Object(c.jsx)(v.a,{isOpen:o,children:Object.keys(n).map((function(t){return n[t].isNode?Object(c.jsx)(x,{data:n[t]},t):Object(c.jsx)(e,{data:n[t],name:t},t)}))})]},a)},h=function(){var e=Object(i.useContext)(m),t=Object(u.a)(e,1)[0],a={};return t.oldCounters.ids.forEach((function(e){var n=new Date(+e),c=String(n.toLocaleString("default",{month:"long"})),r=String(n.getDate());a[c]||(a[c]={}),a[c][r]||(a[c][r]={}),a[c][r][e]=Object(o.a)(Object(o.a)({},t.oldCounters.data[e]),{},{id:e,isNode:!0})})),t.oldCounters.ids.length?Object(c.jsx)(f.a,{className:"overflow-auto",children:Object(c.jsx)(p.a,{className:"mb-5",children:Object.keys(a).map((function(e){return Object(c.jsx)(_,{data:a[e],name:e},e)}))})}):Object(c.jsx)(c.Fragment,{})},g=a(91),N=a(48),C=function(){var e=Object(i.useContext)(m),t=Object(u.a)(e,2),a=t[0],n=t[1];return Object(c.jsx)(f.a,{children:Object(c.jsx)(p.a,{children:Object(c.jsx)(N.a,{onClick:function(){return n({type:l.CREATE_COUNTER})},children:a.counters.ids.length?"\u0415\u0449\u0451 \u0441\u0447\u0451\u0442\u0447\u0438\u043a":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0447\u0451\u0442\u0447\u0438\u043a"})})})},S=a(51),T=a(28),y=a(27),A=a(11),D=function(e,t){var a;switch(t.type){case l.STOP:return e.counters.data[t.id].state===n.Playing&&clearInterval(e.counters.data[t.id].intervalId),Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(A.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{state:n.Pause,value:O.value})))})});case l.PLAY:if(e.mode===d.Single){var c={};return e.counters.ids.forEach((function(t){c[t]=Object(o.a)(Object(o.a)({},e.counters.data[t]),{},{state:n.Pause}),null!==c[t].intervalId&&(clearInterval(c[t].intervalId),c[t].intervalId=null)})),Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},c),{},Object(A.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{state:n.Playing})))})})}return Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(A.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{state:n.Playing})))})});case l.PAUSE:return clearInterval(e.counters.data[t.id].intervalId),Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(A.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{state:n.Pause})))})});case l.UPDATE_TIME:return a=Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(A.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{value:E(e.counters.data[t.id].value)})))})}),t.setStorageState(Object(o.a)(Object(o.a)({},a),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(A.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{state:n.Pause})))})})),a;case l.SET_INTERVAL_ID:return a=Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(A.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{intervalId:t.intervalId})))})}),t.setStorageState(a),a;case l.CREATE_COUNTER:var r=String((new Date).getTime());return e.counters.ids.push(r),a=Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(A.a)({},r,Object(o.a)({},O)))})}),t.setStorageState(a),a;case l.DELETE_AND_MOVE_TO_TABLE:var s=e.counters.ids.filter((function(e){return e!==t.id})),u={},i=function(a){var n=t.id,c=a[n],r=Object(T.a)(a,[n].map(y.a)),s=null===c||void 0===c?void 0:c.value,i=s.seconds,d=void 0===i?0:i,j=s.minutes,O=void 0===j?0:j,l=s.hours;return 0===d&&0===O&&0===(void 0===l?0:l)||(u=Object(o.a)({},c),e.oldCounters.ids.push(t.id)),r}(e.counters.data);return e.counters.data[t.id].intervalId&&clearInterval(e.counters.data[t.id].intervalId),a=Object(o.a)(Object(o.a)({},e),{},{oldCounters:Object(o.a)(Object(o.a)({},e.oldCounters),{},{data:Object(o.a)(Object(o.a)({},e.oldCounters.data),{},Object(A.a)({},t.id,u))}),counters:{ids:s,data:i}}),t.setStorageState(a),a;case l.CHANGE_NAME_FROM_EXIST:return a=Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(A.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{name:t.payload})))})}),t.setStorageState(a),a;case l.CHANGE_NAME_FROM_DELETED:return a=Object(o.a)(Object(o.a)({},e),{},{oldCounters:Object(o.a)(Object(o.a)({},e.oldCounters),{},{data:Object(o.a)(Object(o.a)({},e.oldCounters.data),{},Object(A.a)({},t.id,Object(o.a)(Object(o.a)({},e.oldCounters.data[t.id]),{},{name:t.payload})))})}),t.setStorageState(a),a;case l.DELETE_FROM_TABLE:var j=function(e){var a=t.id;e[a];return Object(T.a)(e,[a].map(y.a))}(e.oldCounters.data),b=e.oldCounters.ids.filter((function(e){return t.id!==e}));return a=Object(o.a)(Object(o.a)({},e),{},{oldCounters:{ids:b,data:j}}),t.setStorageState(a),a;case l.CHANGE_MODE:return t.mode!==e.mode?(a=Object(o.a)(Object(o.a)({},e),{},{mode:t.mode}),t.setStorageState(a),a):Object(o.a)({},e);case l.RESTORE_FROM_TABLE:var m=e.oldCounters.ids.filter((function(e){return e!==t.id})),f={},p=function(a){var n=t.id,c=a[n],r=Object(T.a)(a,[n].map(y.a));return f=Object(o.a)({},c),e.counters.ids.push(t.id),r}(e.oldCounters.data);return a=Object(o.a)(Object(o.a)({},e),{},{oldCounters:{ids:m,data:Object(o.a)({},p)},counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(A.a)({},t.id,f))})}),t.setStorageState(a),a;case l.ADD_TO_USED_NAMES:var x=t.payload.trim().toLowerCase();return x&&e.usedNames.every((function(e){return!~e.indexOf(x)}))?(a=Object(o.a)(Object(o.a)({},e),!e.usedNames.includes(x)&&{usedNames:[].concat(Object(S.a)(e.usedNames),[x])}),t.setStorageState(a),Object(o.a)({},a)):Object(o.a)({},e);case l.DELETE_FROM_USED_NAMES:return a=Object(o.a)(Object(o.a)({},e),{},{usedNames:e.usedNames.filter((function(e){return e!==t.payload}))}),t.setStorageState(a),Object(o.a)({},a);case l.CHANGE_TIME:return Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(A.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{value:Object(o.a)(Object(o.a)({},e.counters.data[t.id].value),{},Object(A.a)({},t.timeType,+t.payload))})))})});default:return Object(o.a)({},e)}},I=a(89),M=a(92),R=a(93),L=a(90),k=function(){var e=Object(i.useContext)(m),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(i.useState)(!1),s=Object(u.a)(r,2),o=s[0],j=s[1];return Object(c.jsx)("div",{style:{position:"absolute",top:"10px",right:"15px"},children:Object(c.jsxs)(I.a,{isOpen:o,toggle:function(){return j((function(e){return!e}))},children:[Object(c.jsx)(M.a,{caret:!0,children:a.mode}),Object(c.jsxs)(R.a,{container:"body",children:[Object(c.jsx)(L.a,{onClick:function(){return n({type:l.CHANGE_MODE,mode:d.Single})},children:d.Single}),Object(c.jsx)(L.a,{onClick:function(){return n({type:l.CHANGE_MODE,mode:d.Multi})},children:d.Multi})]})]})})},P=(a(83),function(e){var t=e.currentInput,a=e.onClick,n=e.onDelete,r=Object(i.useContext)(m),s=Object(u.a)(r,1)[0];return Object(c.jsx)("div",{className:"inputHelper bg-white d-flex flex-column position-absolute",style:{top:"70px",zIndex:10},children:s.usedNames.filter((function(e){return~e.indexOf(t.toLowerCase())&&t!==e})).map((function(e){return Object(c.jsxs)("div",{className:"inputHelper__item",children:[Object(c.jsx)("p",{className:"inputHelper__text",onClick:function(t){t.stopPropagation(),a(e)},children:e}),Object(c.jsx)("div",{onClick:function(t){t.stopPropagation(),n(e)},className:"inputHelper__item-delete text-danger",children:"\xd7"})]},e)}))})}),w=function(e){var t=e.id,a=Object(i.useRef)(null),r=Object(i.useState)(""),s=Object(u.a)(r,2),o=s[0],d=s[1],j=Object(i.useState)(!1),O=Object(u.a)(j,2),b=O[0],E=O[1],f=Object(i.useContext)(m),p=Object(u.a)(f,2),x=p[0],v=p[1],_=Object(i.useState)(!1),h=Object(u.a)(_,2),g=h[0],C=h[1],S=function(){return x.counters.data[t].state===n.Playing},T=function(e){var a=e.target.value;g&&(E(Boolean(a)),d(a),v({type:l.CHANGE_NAME_FROM_EXIST,payload:a,id:t}))},y=function(e,a){g&&v({type:l.CHANGE_TIME,payload:e,timeType:a,id:t})},A=x.counters.data[t],D=A.value,I=D.hours,M=D.minutes,R=D.seconds,L=A.name;return Object(c.jsxs)("div",{style:{border:"1px solid"},className:"d-flex flex-column position-relative pt-4 pb-4 bg-dark",children:[Object(c.jsx)("div",{className:"position-absolute text-danger",style:{top:"-5px",right:"5px",fontSize:"20px",cursor:"pointer"},onClick:function(){return v({type:l.DELETE_AND_MOVE_TO_TABLE,id:t})},children:"\xd7"}),Object(c.jsx)("div",{className:"position-absolute text-danger",style:{top:"5px",right:"25px",fontSize:"10px",cursor:"pointer"},onClick:function(){return C((function(e){return!e}))},children:"\u270e"}),Object(c.jsx)("input",{className:"mb-3 mt-3 align-self-center text-white bg-dark",style:{maxWidth:"60%",border:"transparent"},value:L,title:L,readOnly:!g,ref:a,onBlur:function(e){var t=e.target.value;setTimeout((function(){return E(!1)}),300),v({type:l.ADD_TO_USED_NAMES,payload:t})},onFocus:function(){return e=L,void(g&&(E(Boolean(e)),d(e)));var e},onChange:T}),b&&Object(c.jsx)(P,{currentInput:o,onClick:function(e){T({target:{value:e}}),a.current.focus()},onDelete:function(e){setTimeout((function(){a.current.focus(),E(!0)}),300),v({type:l.DELETE_FROM_USED_NAMES,payload:e})}}),Object(c.jsxs)("div",{className:"mb-5 justify-content-around d-flex text-white w-100",children:[Object(c.jsx)("input",{className:"text-white d-flex text-center text-white bg-dark",style:{border:"none",maxWidth:"15%"},value:I,onChange:function(e){var t=e.target.value;return y(t,"hours")}}),":",Object(c.jsx)("input",{className:"text-white d-flex text-center text-white bg-dark",style:{border:"none",maxWidth:"15%"},value:M,onChange:function(e){var t=e.target.value;return y(t,"minutes")}}),":",Object(c.jsx)("input",{className:"text-white d-flex text-center text-white bg-dark",style:{border:"none",maxWidth:"15%"},value:R,onChange:function(e){var t=e.target.value;return y(t,"seconds")}})]}),Object(c.jsxs)("div",{className:"justify-content-around d-flex",children:[Object(c.jsx)(N.a,{color:"success",onClick:function(){if(S())return v({type:l.PAUSE,id:t});v({type:l.PLAY,id:t});var e=setInterval((function(){return v({type:l.UPDATE_TIME,id:t})}),1e3);v({type:l.SET_INTERVAL_ID,intervalId:e,id:t})},style:{flexBasis:"40%"},children:S()?"\u041f\u0430\u0443\u0437\u0430":0===R?"\u0421\u0442\u0430\u0440\u0442":"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"}),!S()&&Object(c.jsx)(N.a,{color:"success",style:{flexBasis:"40%"},onClick:function(){return v({type:l.STOP,id:t})},children:"\u0421\u0442\u043e\u043f"})]})]})},F=function(){var e=Object(i.useContext)(m),t=Object(u.a)(e,1)[0];return Object(c.jsx)(f.a,{className:"mb-4",children:t.counters.ids.map((function(e){return Object(c.jsx)(p.a,{md:4,className:"mb-4",children:Object(c.jsx)(w,{id:e})},e)}))},"counters")},H=function(){var e=function(e){var t=e.keys,a=e.initialState,n=void 0===a?{}:a,c={};Object.keys(n).forEach((function(e){localStorage.setItem(e,JSON.stringify(n[e]))})),t.forEach((function(e){var t=JSON.parse(localStorage.getItem(e));null!==t&&void 0!==t&&(c[e]=t)}));var r=Object(i.useState)(c),s=Object(u.a)(r,2),d=s[0],j=s[1];return[d,function(e){var a;a="function"===typeof e?Object(o.a)(Object(o.a)({},d),e(d)):Object(o.a)(Object(o.a)({},d),e),t.forEach((function(e){return localStorage.setItem(e,JSON.stringify(a[e]))})),j(a)}]}({keys:Object.keys(b)}),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(i.useReducer)(D,Object(o.a)(Object(o.a)({},b),a)),s=Object(u.a)(r,2),d=s[0],j=s[1];return Object(c.jsx)(m.Provider,{value:[d,function(e){return j(Object(o.a)(Object(o.a)({},e),{},{setStorageState:n}))}],children:Object(c.jsxs)(g.a,{fluid:!0,className:"bg-primary",style:{minHeight:"100vh",padding:"70px 3rem 20px"},children:[Object(c.jsx)(k,{}),Object(c.jsx)(h,{},"oldCounters"),Object(c.jsx)(F,{}),Object(c.jsx)(C,{},"createCounter")]})})};a(84);s.a.render(Object(c.jsx)(H,{}),document.querySelector("#root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.bd8d79d3.chunk.js.map