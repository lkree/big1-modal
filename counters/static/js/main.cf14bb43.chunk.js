(this["webpackJsonpnew-counter"]=this["webpackJsonpnew-counter"]||[]).push([[0],{67:function(e,t,a){"use strict";a.r(t);var c=a(4),n=a(2),r=a(22),s=a.n(r),d=a(1),o=a(11),j=1,i=2,u={name:"\u0431\u0435\u0437 \u0438\u043c\u0435\u043d\u0438",state:i,value:{seconds:0,minutes:0,hours:0},intervalId:null},b="single",O="multi",l=function(e){var t=e.seconds+1,a=e.minutes,c=e.hours;return 60===t&&(t=0,a+=1),60===a&&(a=0,c+=1),{seconds:t,minutes:a,hours:c}},h=a(40),v=Object(n.createContext)(null),x="stop",m="play",f="pause",p="updateTime",g="createCounter",y="setIntervalId",C="deleteAndMoveToTable",S="changeName",I="deleteFromTable",N="changeMode",k=function(e){var t=e.id,a=Object(n.useContext)(v),r=Object(o.a)(a,2),s=r[0],d=r[1],i=function(){return s.counters.data[t].state===j},u=s.counters.data[t],b=u.value,O=b.hours,l=b.minutes,g=b.seconds,I=u.name;return Object(c.jsxs)("div",{style:{border:"1px solid"},className:"d-flex flex-column position-relative pt-4 pb-4 bg-dark",children:[Object(c.jsx)("div",{className:"position-absolute text-danger",style:{top:"-5px",right:"5px",fontSize:"20px",cursor:"pointer"},onClick:function(){return d({type:C,id:t})},children:"\xd7"}),Object(c.jsx)("input",{className:"mb-3 mt-3 align-self-center text-white bg-dark",style:{maxWidth:"60%"},value:I,title:I,onChange:function(e){var a=e.target.value;return d({type:S,payload:a,id:t})}}),Object(c.jsxs)("div",{className:"mb-5 justify-content-around d-flex",children:[Object(c.jsxs)("div",{className:"text-white",children:[O," :"]},"hours"),Object(c.jsxs)("div",{className:"text-white",children:[l," :"]},"minutes"),Object(c.jsx)("div",{className:"text-white",children:g},"seconds")]}),Object(c.jsxs)("div",{className:"justify-content-around d-flex",children:[Object(c.jsx)("div",{children:Object(c.jsx)(h.a,{color:"success",onClick:function(){if(i())d({type:f,id:t});else{d({type:m,id:t});var e=setInterval((function(){return d({type:p,id:t})}),1e3);d({type:y,intervalId:e,id:t})}},children:i()?"\u041f\u0430\u0443\u0437\u0430":0===g?"\u0421\u0442\u0430\u0440\u0442":"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"})}),Object(c.jsx)("div",{children:Object(c.jsx)(h.a,{color:"success",onClick:function(){return d({type:x,id:t})},children:"\u0421\u0442\u043e\u043f"})})]})]})},w=a(68),T=a(69),E=a(70),J=function(){var e=Object(n.useContext)(v),t=Object(o.a)(e,2),a=t[0],r=t[1];return a.oldCounters.ids.length?Object(c.jsx)(w.a,{md:"2",children:Object(c.jsx)(T.a,{className:"mb-5",children:Object(c.jsxs)(E.a,{dark:!0,children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"\u0414\u0430\u0442\u0430"}),Object(c.jsx)("td",{children:"\u0418\u043c\u044f"}),Object(c.jsx)("td",{children:"\u0412\u0440\u0435\u043c\u044f"}),Object(c.jsx)("td",{})]})}),Object(c.jsx)("tbody",{children:a.oldCounters.ids.map((function(e){var t=a.oldCounters.data[e],n=t.name,s=t.value,d=s.seconds,o=s.minutes,j=s.hours;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:new Date(e).toDateString()}),Object(c.jsx)("td",{children:n}),Object(c.jsxs)("td",{children:[j," : ",o," : ",d]}),Object(c.jsx)("td",{onClick:function(){return function(e){return r({type:I,id:e})}(e)},children:"\xd7"})]},e)}))})]})})}):Object(c.jsx)(c.Fragment,{})},D=a(73),F=function(){var e=Object(n.useContext)(v),t=Object(o.a)(e,2),a=t[0],r=t[1];return Object(c.jsx)(w.a,{children:Object(c.jsx)(h.a,{onClick:function(){return r({type:g})},children:a.counters.ids.length?"\u0415\u0449\u0451 \u0441\u0447\u0451\u0442\u0447\u0438\u043a":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0447\u0451\u0442\u0447\u0438\u043a"})})},M=a(30),q=a(29),z=a(10),A=function(e,t){var a;switch(t.type){case x:return e.counters.data[t.id].state===j&&clearInterval(e.counters.data[t.id].intervalId),Object(d.a)(Object(d.a)({},e),{},{counters:Object(d.a)(Object(d.a)({},e.counters),{},{data:Object(d.a)(Object(d.a)({},e.counters.data),{},Object(z.a)({},t.id,Object(d.a)(Object(d.a)({},e.counters.data[t.id]),{},{state:i,value:u.value})))})});case m:if(e.mode===b){var c={};return e.counters.ids.forEach((function(t){c[t]=Object(d.a)(Object(d.a)({},e.counters.data[t]),{},{state:i}),null!==c[t].intervalId&&(clearInterval(c[t].intervalId),c[t].intervalId=null)})),Object(d.a)(Object(d.a)({},e),{},{counters:Object(d.a)(Object(d.a)({},e.counters),{},{data:Object(d.a)(Object(d.a)({},c),{},Object(z.a)({},t.id,Object(d.a)(Object(d.a)({},e.counters.data[t.id]),{},{state:j})))})})}return Object(d.a)(Object(d.a)({},e),{},{counters:Object(d.a)(Object(d.a)({},e.counters),{},{data:Object(d.a)(Object(d.a)({},e.counters.data),{},Object(z.a)({},t.id,Object(d.a)(Object(d.a)({},e.counters.data[t.id]),{},{state:j})))})});case f:return clearInterval(e.counters.data[t.id].intervalId),Object(d.a)(Object(d.a)({},e),{},{counters:Object(d.a)(Object(d.a)({},e.counters),{},{data:Object(d.a)(Object(d.a)({},e.counters.data),{},Object(z.a)({},t.id,Object(d.a)(Object(d.a)({},e.counters.data[t.id]),{},{state:i})))})});case p:return a=Object(d.a)(Object(d.a)({},e),{},{counters:Object(d.a)(Object(d.a)({},e.counters),{},{data:Object(d.a)(Object(d.a)({},e.counters.data),{},Object(z.a)({},t.id,Object(d.a)(Object(d.a)({},e.counters.data[t.id]),{},{value:l(e.counters.data[t.id].value)})))})}),t.setStorageState(Object(d.a)(Object(d.a)({},a),{},{counters:Object(d.a)(Object(d.a)({},e.counters),{},{data:Object(d.a)(Object(d.a)({},e.counters.data),{},Object(z.a)({},t.id,Object(d.a)(Object(d.a)({},e.counters.data[t.id]),{},{state:i})))})})),a;case y:return a=Object(d.a)(Object(d.a)({},e),{},{counters:Object(d.a)(Object(d.a)({},e.counters),{},{data:Object(d.a)(Object(d.a)({},e.counters.data),{},Object(z.a)({},t.id,Object(d.a)(Object(d.a)({},e.counters.data[t.id]),{},{intervalId:t.intervalId})))})}),t.setStorageState(a),a;case g:var n=(new Date).getTime();return e.counters.ids.push(n),a=Object(d.a)(Object(d.a)({},e),{},{counters:Object(d.a)(Object(d.a)({},e.counters),{},{data:Object(d.a)(Object(d.a)({},e.counters.data),{},Object(z.a)({},n,Object(d.a)({},u)))})}),t.setStorageState(a),a;case C:var r=e.counters.ids.filter((function(e){return e!==t.id})),s={},o=function(a){var c=t.id,n=a[c],r=Object(M.a)(a,[c].map(q.a)),o=null===n||void 0===n?void 0:n.value,j=o.seconds,i=void 0===j?0:j,u=o.minutes,b=void 0===u?0:u,O=o.hours;return 0===i&&0===b&&0===(void 0===O?0:O)||(s=Object(d.a)({},n),e.oldCounters.ids.push(t.id)),r}(e.counters.data);return e.counters.data[t.id].intervalId&&clearInterval(e.counters.data[t.id].intervalId),a=Object(d.a)(Object(d.a)({},e),{},{oldCounters:Object(d.a)(Object(d.a)({},e.oldCounters),{},{data:Object(d.a)(Object(d.a)({},e.oldCounters.data),{},Object(z.a)({},t.id,s))}),counters:{ids:r,data:o}}),t.setStorageState(a),a;case S:return a=Object(d.a)(Object(d.a)({},e),{},{counters:Object(d.a)(Object(d.a)({},e.counters),{},{data:Object(d.a)(Object(d.a)({},e.counters.data),{},Object(z.a)({},t.id,Object(d.a)(Object(d.a)({},e.counters.data[t.id]),{},{name:t.payload})))})}),t.setStorageState(a),a;case I:var O=function(e){var a=t.id;e[a];return Object(M.a)(e,[a].map(q.a))}(e.oldCounters.data),h=e.oldCounters.ids.filter((function(e){return t.id!==e}));return a=Object(d.a)(Object(d.a)({},e),{},{oldCounters:{ids:h,data:O}}),t.setStorageState(a),a;case N:return t.mode!==e.mode?(a=Object(d.a)(Object(d.a)({},e),{},{mode:t.mode}),t.setStorageState(a),a):Object(d.a)({},e);default:return Object(d.a)({},e)}},P=a(71),R=a(75),W=a(74),B=a(72),G=function(){var e=Object(n.useContext)(v),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(!1),d=Object(o.a)(s,2),j=d[0],i=d[1];return Object(c.jsx)("div",{className:"",style:{position:"fixed",top:"10px",right:"15px"},children:Object(c.jsxs)(P.a,{isOpen:j,toggle:function(){return i((function(e){return!e}))},children:[Object(c.jsx)(R.a,{caret:!0,children:a.mode}),Object(c.jsxs)(W.a,{container:"body",children:[Object(c.jsx)(B.a,{onClick:function(){return r({type:N,mode:b})},children:b}),Object(c.jsx)(B.a,{onClick:function(){return r({type:N,mode:O})},children:O})]})]})})},H={counters:{ids:[],data:{}},oldCounters:{ids:[],data:[]},mode:O},K=function(){var e=function(e){var t=e.keys,a=e.initialState,c=void 0===a?{}:a,r={},s=Object.keys(c);s.forEach((function(e){localStorage.setItem(e,s[e])})),t.forEach((function(e){var t=JSON.parse(localStorage.getItem(e));null!==t&&void 0!==t&&(r[e]=t)}));var j=Object(n.useState)(r),i=Object(o.a)(j,2),u=i[0],b=i[1];return[u,function(e){var a;a="function"===typeof e?Object(d.a)(Object(d.a)({},u),e(u)):"object"===typeof e?Object(d.a)(Object(d.a)({},u),e):Object(z.a)({},t[0],e),t.forEach((function(e){return localStorage.setItem(e,JSON.stringify(a[e]))})),b(a)}]}({keys:["counters","oldCounters","mode"]}),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(n.useReducer)(A,Object(d.a)(Object(d.a)({},H),a),(function(e){return e})),j=Object(o.a)(s,2),i=j[0],u=j[1];return Object(c.jsx)(v.Provider,{value:[i,function(e){return u(Object(d.a)(Object(d.a)({},e),{},{setStorageState:r}))}],children:Object(c.jsxs)(D.a,{fluid:!0,className:"bg-primary p-5",style:{height:"100vh"},children:[Object(c.jsx)(G,{}),Object(c.jsx)(J,{},"oldCounters"),Object(c.jsx)(w.a,{className:"mb-4",children:i.counters.ids.map((function(e){return Object(c.jsx)(T.a,{md:3,className:"mb-4",children:Object(c.jsx)(k,{id:e})},e)}))},"counters"),Object(c.jsx)(F,{},"createCounter")]})})};a(66);s.a.render(Object(c.jsx)(K,{}),document.querySelector("#root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.cf14bb43.chunk.js.map