(this["webpackJsonpnew-counter"]=this["webpackJsonpnew-counter"]||[]).push([[0],{23:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a(3),r=a(14),s=a.n(r),o=a(1),d=a(6),j=1,u=2,i={name:"\u0431\u0435\u0437 \u0438\u043c\u0435\u043d\u0438",state:u,value:{seconds:0,minutes:0,hours:0}},b=function(e){var t=e.seconds+1,a=e.minutes,c=e.hours;return 60===t&&(t=0,a+=1),60===a&&(a=0,c+=1),{seconds:t,minutes:a,hours:c}},O=a(28),l=Object(n.createContext)(null),h="stop",v="play",x="pause",f="updateTime",m="createCounter",p="deleteAndMoveToTable",y="changeName",g="deleteFromTable",C=function(e){var t=e.id,a=Object(n.useContext)(l),r=Object(d.a)(a,2),s=r[0],o=r[1],u=Object(n.useState)(null),i=Object(d.a)(u,2),b=i[0],m=i[1],g=function(){return s.counters.data[t].state===j},C=s.counters.data[t],S=C.value,N=S.hours,k=S.minutes,I=S.seconds,w=C.name;return Object(c.jsxs)("div",{style:{border:"1px solid"},className:"d-flex flex-column position-relative pt-4 pb-4 bg-dark",children:[Object(c.jsx)("div",{className:"position-absolute text-danger",style:{top:"-5px",right:"5px",fontSize:"20px",cursor:"pointer"},onClick:function(){return o({type:p,id:t,intervalId:b})},children:"\xd7"}),Object(c.jsx)("input",{className:"mb-3 mt-3 align-self-center text-white bg-dark",style:{maxWidth:"60%"},value:w,onChange:function(e){var a=e.target.value;return o({type:y,payload:a,id:t})}}),Object(c.jsxs)("div",{className:"mb-5 justify-content-around d-flex",children:[Object(c.jsxs)("div",{className:"text-white",children:[N," :"]},"hours"),Object(c.jsxs)("div",{className:"text-white",children:[k," :"]},"minutes"),Object(c.jsx)("div",{className:"text-white",children:I},"seconds")]}),Object(c.jsxs)("div",{className:"justify-content-around d-flex",children:[Object(c.jsx)("div",{children:Object(c.jsx)(O.a,{color:"success",onClick:function(){g()?o({type:x,intervalId:b,id:t}):(o({type:v,id:t}),m(setInterval((function(){return o({type:f,id:t})}),1e3)))},children:g()?"\u041f\u0430\u0443\u0437\u0430":0===I?"\u0421\u0442\u0430\u0440\u0442":"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"})}),Object(c.jsx)("div",{children:Object(c.jsx)(O.a,{color:"success",onClick:function(){return o({type:h,intervalId:b,id:t})},children:"\u0421\u0442\u043e\u043f"})})]})]})},S=a(24),N=a(25),k=a(26),I=function(){var e=Object(n.useContext)(l),t=Object(d.a)(e,2),a=t[0],r=t[1];return a.oldCounters.ids.length?Object(c.jsx)(S.a,{md:"2",children:Object(c.jsx)(N.a,{className:"mb-5",children:Object(c.jsxs)(k.a,{dark:!0,children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"\u0414\u0430\u0442\u0430"}),Object(c.jsx)("td",{children:"\u0418\u043c\u044f"}),Object(c.jsx)("td",{children:"\u0412\u0440\u0435\u043c\u044f"}),Object(c.jsx)("td",{})]})}),Object(c.jsx)("tbody",{children:a.oldCounters.ids.map((function(e){var t=a.oldCounters.data[e],n=t.name,s=t.value,o=s.seconds,d=s.minutes,j=s.hours;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:new Date(e).toDateString()}),Object(c.jsx)("td",{children:n}),Object(c.jsxs)("td",{children:[j," : ",d," : ",o]}),Object(c.jsx)("td",{onClick:function(){return function(e){return r({type:g,id:e})}(e)},children:"\xd7"})]},e)}))})]})})}):Object(c.jsx)(c.Fragment,{})},w=a(27),T=function(){var e=Object(n.useContext)(l),t=Object(d.a)(e,2),a=t[0],r=t[1];return Object(c.jsx)(S.a,{children:Object(c.jsx)(O.a,{onClick:function(){return r({type:m})},children:a.counters.ids.length?"\u0415\u0449\u0451 \u0441\u0447\u0451\u0442\u0447\u0438\u043a":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0447\u0451\u0442\u0447\u0438\u043a"})})},J=a(13),D=a(12),E=a(5),F=function(e,t){var a;switch(t.type){case h:return e.counters.data[t.id].state===j&&clearInterval(t.intervalId),Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(E.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{state:u,value:i.value})))})});case v:return Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(E.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{state:j})))})});case x:return clearInterval(t.intervalId),Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(E.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{state:u})))})});case f:return a=Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(E.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{value:b(e.counters.data[t.id].value)})))})}),t.setStorageState(Object(o.a)(Object(o.a)({},a),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(E.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{state:u})))})})),a;case m:var c=(new Date).getTime();return e.counters.ids.push(c),a=Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(E.a)({},c,Object(o.a)({},i)))})}),t.setStorageState(a),a;case p:var n=e.counters.ids.filter((function(e){return e!==t.id})),r={},s=function(a){var c=t.id,n=a[c],s=Object(J.a)(a,[c].map(D.a)),d=null===n||void 0===n?void 0:n.value,j=d.seconds,u=void 0===j?0:j,i=d.minutes,b=void 0===i?0:i,O=d.hours;return 0===u&&0===b&&0===(void 0===O?0:O)||(r=Object(o.a)({},n),e.oldCounters.ids.push(t.id)),s}(e.counters.data);return t.intervalId&&clearInterval(t.intervalId),a=Object(o.a)(Object(o.a)({},e),{},{oldCounters:Object(o.a)(Object(o.a)({},e.oldCounters),{},{data:Object(o.a)(Object(o.a)({},e.oldCounters.data),{},Object(E.a)({},t.id,r))}),counters:{ids:n,data:s}}),t.setStorageState(a),a;case y:return a=Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(E.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{name:t.payload})))})}),t.setStorageState(a),a;case g:var d=function(e){var a=t.id;e[a];return Object(J.a)(e,[a].map(D.a))}(e.oldCounters.data),O=e.oldCounters.ids.filter((function(e){return t.id!==e}));return a=Object(o.a)(Object(o.a)({},e),{},{oldCounters:{ids:O,data:d}}),t.setStorageState(a),a;default:return Object(o.a)({},e)}},q={counters:{ids:[],data:{}},oldCounters:{ids:[],data:[]}},z=function(){var e=function(e){var t=e.keys,a=e.initialState,c=void 0===a?{}:a,r={},s=Object.keys(c);s.forEach((function(e){localStorage.setItem(e,s[e])})),t.forEach((function(e){return r[e]=JSON.parse(localStorage.getItem(e))}));var j=Object(n.useState)(r),u=Object(d.a)(j,2),i=u[0],b=u[1];return[i,function(e){var a;a="function"===typeof e?Object(o.a)(Object(o.a)({},i),e(i)):"object"===typeof e?Object(o.a)(Object(o.a)({},i),e):Object(E.a)({},t[0],e),t.forEach((function(e){return localStorage.setItem(e,JSON.stringify(a[e]))})),b(a)}]}({keys:["counters","oldCounters"]}),t=Object(d.a)(e,2),a=t[0],r=t[1],s=Object.keys(a).every((function(e){return Boolean(a[e])})),j=Object(n.useReducer)(F,s?a:q,(function(e){return e})),u=Object(d.a)(j,2),i=u[0],b=u[1];return Object(c.jsx)(l.Provider,{value:[i,function(e){return b(Object(o.a)(Object(o.a)({},e),{},{setStorageState:r}))}],children:Object(c.jsxs)(w.a,{fluid:!0,className:"bg-primary p-5",style:{height:"100vh"},children:[Object(c.jsx)(I,{},"oldCounters"),Object(c.jsx)(S.a,{className:"mb-4",children:i.counters.ids.map((function(e){return Object(c.jsx)(N.a,{md:3,className:"mb-4",children:Object(c.jsx)(C,{id:e})},e)}))},"counters"),Object(c.jsx)(T,{},"createCounter")]})})};a(22);s.a.render(Object(c.jsx)(z,{}),document.querySelector("#root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.d93e5296.chunk.js.map