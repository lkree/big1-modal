(this["webpackJsonpnew-counter-ts"]=this["webpackJsonpnew-counter-ts"]||[]).push([[0],{54:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var c,n=a(4),r=a(18),s=a.n(r),o=a(1),i=a(8),u=a(2);!function(e){e[e.Playing=0]="Playing",e[e.Pause=1]="Pause"}(c||(c={}));var d,j,O={name:"\u0431\u0435\u0437 \u0438\u043c\u0435\u043d\u0438",state:c.Pause,value:{seconds:0,minutes:0,hours:0},intervalId:null};(j=d||(d={})).Single="single",j.Multi="multi";var b,l={counters:{ids:[],data:{}},oldCounters:{ids:[],data:{}},mode:d.Multi},E=function(e){var t=e.seconds+1,a=e.minutes,c=e.hours;return 60===t&&(t=0,a+=1),60===a&&(a=0,c+=1),{seconds:t,minutes:a,hours:c}},m=Object(u.createContext)([l,function(e){}]),v=a(83),f=a(84);!function(e){e.STOP="stop",e.PLAY="play",e.PAUSE="pause",e.UPDATE_TIME="updateTime",e.CREATE_COUNTER="createCounter",e.SET_INTERVAL_ID="setIntervalId",e.DELETE_AND_MOVE_TO_TABLE="deleteAndMoveToTable",e.CHANGE_NAME_FROM_EXIST="changeNameFromExist",e.CHANGE_NAME_FROM_DELETED="changeNameFromDeleted",e.DELETE_FROM_TABLE="deleteFromTable",e.CHANGE_MODE="changeMode",e.RESTORE_FROM_TABLE="restoreFromTable"}(b||(b={}));a(54);var x=function(e){var t=e.data,a=Object(u.useContext)(m),c=Object(i.a)(a,2)[1],r=t.id,s=t.name,o=t.value,d=o.hours,j=o.minutes,O=o.seconds;return Object(n.jsxs)("div",{className:"oldCounterItem d-flex justify-content-between p-3 border-bottom align-items-center",children:[Object(n.jsx)("p",{className:"oldCounterItem__item text-white m-0",children:Object(n.jsx)("input",{type:"text",className:"text-white",title:s,value:s,style:{background:"transparent",border:"none"},onChange:function(e){return function(e,t){var a=e.target.value;return c({type:b.CHANGE_NAME_FROM_DELETED,id:t,payload:a})}(e,r)}})}),Object(n.jsxs)("p",{className:"oldCounterItem__item text-white m-0",children:[d," : ",j," : ",O]}),Object(n.jsx)("p",{className:"oldCounterItem__item oldCounterItem__item--action m-0",onClick:function(){return function(e){return c({type:b.RESTORE_FROM_TABLE,id:e})}(r)},children:"\u2692"}),Object(n.jsx)("p",{className:"oldCounterItem__item oldCounterItem__item--action text-danger m-0",onClick:function(){return function(e){return c({type:b.DELETE_FROM_TABLE,id:e})}(r)},children:"\xd7"})]})},p=a(82),h=function e(t){var a=t.name,c=t.data,r=Object(u.useState)(!1),s=Object(i.a)(r,2),o=s[0],d=s[1];return Object(n.jsxs)("div",{className:"bg-dark pt-1 pb-1 pl-3 pr-3",children:[Object(n.jsx)("div",{className:"text-white",onClick:function(e){e.stopPropagation(),d((function(e){return!e}))},children:a}),Object(n.jsx)(p.a,{isOpen:o,children:Object.keys(c).map((function(t){return c[t].isNode?Object(n.jsx)(x,{data:c[t]},t):Object(n.jsx)(e,{data:c[t],name:t},t)}))})]},a)},_=function(){var e=Object(u.useContext)(m),t=Object(i.a)(e,1)[0],a={};return t.oldCounters.ids.forEach((function(e){var c=new Date(+e),n=String(c.toLocaleString("default",{month:"long"})),r=String(c.getDate());a[n]||(a[n]={}),a[n][r]||(a[n][r]={}),a[n][r][e]=Object(o.a)(Object(o.a)({},t.oldCounters.data[e]),{},{id:e,isNode:!0})})),t.oldCounters.ids.length?Object(n.jsx)(v.a,{className:"overflow-auto",children:Object(n.jsx)(f.a,{className:"mb-5",children:Object.keys(a).map((function(e){return Object(n.jsx)(h,{data:a[e],name:e},e)}))})}):Object(n.jsx)(n.Fragment,{})},C=a(87),g=a(46),S=function(){var e=Object(u.useContext)(m),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(n.jsx)(v.a,{children:Object(n.jsx)(f.a,{children:Object(n.jsx)(g.a,{onClick:function(){return c({type:b.CREATE_COUNTER})},children:a.counters.ids.length?"\u0415\u0449\u0451 \u0441\u0447\u0451\u0442\u0447\u0438\u043a":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0447\u0451\u0442\u0447\u0438\u043a"})})})},T=a(26),N=a(25),y=a(12),A=function(e,t){var a;switch(t.type){case b.STOP:return e.counters.data[t.id].state===c.Playing&&clearInterval(e.counters.data[t.id].intervalId),Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(y.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{state:c.Pause,value:O.value})))})});case b.PLAY:if(e.mode===d.Single){var n={};return e.counters.ids.forEach((function(t){n[t]=Object(o.a)(Object(o.a)({},e.counters.data[t]),{},{state:c.Pause}),null!==n[t].intervalId&&(clearInterval(n[t].intervalId),n[t].intervalId=null)})),Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},n),{},Object(y.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{state:c.Playing})))})})}return Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(y.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{state:c.Playing})))})});case b.PAUSE:return clearInterval(e.counters.data[t.id].intervalId),Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(y.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{state:c.Pause})))})});case b.UPDATE_TIME:return a=Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(y.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{value:E(e.counters.data[t.id].value)})))})}),t.setStorageState(Object(o.a)(Object(o.a)({},a),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(y.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{state:c.Pause})))})})),a;case b.SET_INTERVAL_ID:return a=Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(y.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{intervalId:t.intervalId})))})}),t.setStorageState(a),a;case b.CREATE_COUNTER:var r=String((new Date).getTime());return e.counters.ids.push(r),a=Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(y.a)({},r,Object(o.a)({},O)))})}),t.setStorageState(a),a;case b.DELETE_AND_MOVE_TO_TABLE:var s=e.counters.ids.filter((function(e){return e!==t.id})),i={},u=function(a){var c=t.id,n=a[c],r=Object(T.a)(a,[c].map(N.a)),s=null===n||void 0===n?void 0:n.value,u=s.seconds,d=void 0===u?0:u,j=s.minutes,O=void 0===j?0:j,b=s.hours;return 0===d&&0===O&&0===(void 0===b?0:b)||(i=Object(o.a)({},n),e.oldCounters.ids.push(t.id)),r}(e.counters.data);return e.counters.data[t.id].intervalId&&clearInterval(e.counters.data[t.id].intervalId),a=Object(o.a)(Object(o.a)({},e),{},{oldCounters:Object(o.a)(Object(o.a)({},e.oldCounters),{},{data:Object(o.a)(Object(o.a)({},e.oldCounters.data),{},Object(y.a)({},t.id,i))}),counters:{ids:s,data:u}}),t.setStorageState(a),a;case b.CHANGE_NAME_FROM_EXIST:return a=Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(y.a)({},t.id,Object(o.a)(Object(o.a)({},e.counters.data[t.id]),{},{name:t.payload})))})}),t.setStorageState(a),a;case b.CHANGE_NAME_FROM_DELETED:return a=Object(o.a)(Object(o.a)({},e),{},{oldCounters:Object(o.a)(Object(o.a)({},e.oldCounters),{},{data:Object(o.a)(Object(o.a)({},e.oldCounters.data),{},Object(y.a)({},t.id,Object(o.a)(Object(o.a)({},e.oldCounters.data[t.id]),{},{name:t.payload})))})}),t.setStorageState(a),a;case b.DELETE_FROM_TABLE:var j=function(e){var a=t.id;e[a];return Object(T.a)(e,[a].map(N.a))}(e.oldCounters.data),l=e.oldCounters.ids.filter((function(e){return t.id!==e}));return a=Object(o.a)(Object(o.a)({},e),{},{oldCounters:{ids:l,data:j}}),t.setStorageState(a),a;case b.CHANGE_MODE:return t.mode!==e.mode?(a=Object(o.a)(Object(o.a)({},e),{},{mode:t.mode}),t.setStorageState(a),a):Object(o.a)({},e);case b.RESTORE_FROM_TABLE:var m=e.oldCounters.ids.filter((function(e){return e!==t.id})),v={},f=function(a){var c=t.id,n=a[c],r=Object(T.a)(a,[c].map(N.a));return v=Object(o.a)({},n),e.counters.ids.push(t.id),r}(e.oldCounters.data);return a=Object(o.a)(Object(o.a)({},e),{},{oldCounters:{ids:m,data:Object(o.a)({},f)},counters:Object(o.a)(Object(o.a)({},e.counters),{},{data:Object(o.a)(Object(o.a)({},e.counters.data),{},Object(y.a)({},t.id,v))})}),t.setStorageState(a),a;default:return Object(o.a)({},e)}},I=a(85),M=a(88),D=a(89),R=a(86),P=function(){var e=Object(u.useContext)(m),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(u.useState)(!1),s=Object(i.a)(r,2),o=s[0],j=s[1];return Object(n.jsx)("div",{style:{position:"fixed",top:"10px",right:"15px"},children:Object(n.jsxs)(I.a,{isOpen:o,toggle:function(){return j((function(e){return!e}))},children:[Object(n.jsx)(M.a,{caret:!0,children:a.mode}),Object(n.jsxs)(D.a,{container:"body",children:[Object(n.jsx)(R.a,{onClick:function(){return c({type:b.CHANGE_MODE,mode:d.Single})},children:d.Single}),Object(n.jsx)(R.a,{onClick:function(){return c({type:b.CHANGE_MODE,mode:d.Multi})},children:d.Multi})]})]})})},L=function(e){var t=e.id,a=Object(u.useContext)(m),r=Object(i.a)(a,2),s=r[0],o=r[1],d=function(){return s.counters.data[t].state===c.Playing},j=s.counters.data[t],O=j.value,l=O.hours,E=O.minutes,v=O.seconds,f=j.name;return Object(n.jsxs)("div",{style:{border:"1px solid"},className:"d-flex flex-column position-relative pt-4 pb-4 bg-dark",children:[Object(n.jsx)("div",{className:"position-absolute text-danger",style:{top:"-5px",right:"5px",fontSize:"20px",cursor:"pointer"},onClick:function(){return o({type:b.DELETE_AND_MOVE_TO_TABLE,id:t})},children:"\xd7"}),Object(n.jsx)("input",{className:"mb-3 mt-3 align-self-center text-white bg-dark",style:{maxWidth:"60%",border:"transparent"},value:f,title:f,onChange:function(e){var a=e.target.value;return o({type:b.CHANGE_NAME_FROM_EXIST,payload:a,id:t})}}),Object(n.jsxs)("div",{className:"mb-5 justify-content-around d-flex",children:[Object(n.jsxs)("div",{className:"text-white",children:[l," :"]}),Object(n.jsxs)("div",{className:"text-white",children:[E," :"]}),Object(n.jsx)("div",{className:"text-white",children:v})]}),Object(n.jsxs)("div",{className:"justify-content-around d-flex",children:[Object(n.jsx)(g.a,{color:"success",onClick:function(){if(d())o({type:b.PAUSE,id:t});else{o({type:b.PLAY,id:t});var e=setInterval((function(){return o({type:b.UPDATE_TIME,id:t})}),1e3);o({type:b.SET_INTERVAL_ID,intervalId:e,id:t})}},style:{flexBasis:"40%"},children:d()?"\u041f\u0430\u0443\u0437\u0430":0===v?"\u0421\u0442\u0430\u0440\u0442":"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"}),!d()&&Object(n.jsx)(g.a,{color:"success",style:{flexBasis:"40%"},onClick:function(){return o({type:b.STOP,id:t})},children:"\u0421\u0442\u043e\u043f"})]})]})},k=function(){var e=Object(u.useContext)(m),t=Object(i.a)(e,1)[0];return Object(n.jsx)(v.a,{className:"mb-4",children:t.counters.ids.map((function(e){return Object(n.jsx)(f.a,{md:4,className:"mb-4",children:Object(n.jsx)(L,{id:e})},e)}))},"counters")},w=function(){var e=function(e){var t=e.keys,a=e.initialState,c=void 0===a?{}:a,n={};Object.keys(c).forEach((function(e){localStorage.setItem(e,JSON.stringify(c[e]))})),t.forEach((function(e){var t=JSON.parse(localStorage.getItem(e));null!==t&&void 0!==t&&(n[e]=t)}));var r=Object(u.useState)(n),s=Object(i.a)(r,2),d=s[0],j=s[1];return[d,function(e){var a;a="function"===typeof e?Object(o.a)(Object(o.a)({},d),e(d)):Object(o.a)(Object(o.a)({},d),e),t.forEach((function(e){return localStorage.setItem(e,JSON.stringify(a[e]))})),j(a)}]}({keys:Object.keys(l)}),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(u.useReducer)(A,Object(o.a)(Object(o.a)({},l),a)),s=Object(i.a)(r,2),d=s[0],j=s[1];return Object(n.jsx)(m.Provider,{value:[d,function(e){return j(Object(o.a)(Object(o.a)({},e),{},{setStorageState:c}))}],children:Object(n.jsxs)(C.a,{fluid:!0,className:"bg-primary",style:{minHeight:"100vh",padding:"70px 3rem 20px"},children:[Object(n.jsx)(P,{}),Object(n.jsx)(_,{},"oldCounters"),Object(n.jsx)(k,{}),Object(n.jsx)(S,{},"createCounter")]})})};a(80);s.a.render(Object(n.jsx)(w,{}),document.querySelector("#root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.2619fd79.chunk.js.map