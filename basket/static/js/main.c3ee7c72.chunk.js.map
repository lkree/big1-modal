{"version":3,"sources":["Redux/actions/actionTypes.js","Redux/reducers/app.js","Redux/reducers/orderResult.js","Redux/rootReducer.js","Redux/actions/actions.js","components/Product/Product.js","components/Product/index.js","components/ProductList/ProductList.js","components/ProductList/index.js","components/OrderResultPosition/OrderResultPosition.js","components/OrderResultPosition/index.js","components/OrderResult/OrderResult.js","components/OrderResult/index.js","components/App/app.js","components/App/index.js","index.js"],"names":["getData","orderPromoSubmit","itemDelete","itemAdd","itemSub","itemChange","initialState","data","discount","error","combineReducers","App","state","action","positions","type","payload","filter","position","article","delete","map","count","value","orderResult","onGetData","Product","this","props","fullName","price","photo","oldPrice","glueNumber","onItemAdd","onItemSub","onItemChange","resultPrice","toLocaleString","className","src","alt","onClick","onChange","onItemDeleteClick","React","Component","ProductList","Table","borderless","itemRender","undefined","OrderResultPosition","OrderResult","calculateTotalPrice","totalPrice","length","reduce","prev","cur","calculateDiscount","calculateTotalCount","curr","promoCodes","discountSize","delivery","placeholder","Button","evt","onOrderPromoSubmit","connect","dispatch","codes","currentCodes","preventDefault","input","document","querySelector","promoCode","includes","array","Item","item","key","nextId","string","search","parseInt","split","join","appInitialize","Container","Row","Col","xs","smth","fetch","then","result","json","target","parentElement","textContent","store","createStore","rootReducer","applyMiddleware","reduxThunk","app","ReactDOM","render"],"mappings":"gVAAaA,EAAU,UACVC,EAAmB,mBACnBC,EAAa,aACbC,EAAU,UACVC,EAAU,UACVC,EAAa,aCHpBC,EAAe,CACnBC,KAAM,ICDR,IAAMD,EAAe,CACnBE,SAAU,EACVC,MAAO,ICCMC,kBAAgB,CAC7BC,IFAa,WAA4C,IAA/BC,EAA8B,uDAAtBN,EAAcO,EAAQ,uCACnDC,EAAaF,EAAML,KAAnBO,UACL,OAAOD,EAAOE,MACZ,KAAKf,EACH,OAAO,eACFY,EADL,CAEEL,KAAMM,EAAOG,UAEjB,KAAKd,EAEH,OADAY,EAAYA,EAAUG,QAAO,SAACC,GAAD,OAAcA,EAASC,UAAYN,EAAOO,UAC/D,CACNb,KAAK,aACHO,UAAWA,EAAU,GAAKA,EAAY,IACnCF,IAGT,KAAKT,EAEH,OADAW,EAAUO,KAAI,SAACH,GAAD,OAAcA,EAASC,UAAYN,EAAOM,QAAUD,EAASI,OAASJ,EAASI,MAAQ,GAAKJ,EAASI,SAC3G,CACNf,KAAK,aACHO,UAAWA,GACVF,IAGP,KAAKR,EAOH,OANAU,EAAUO,KAAI,SAACH,GACb,OAAIA,EAASC,UAAYN,EAAOM,SAAWD,EAASI,MAAQ,EACnDJ,EAASI,OAASJ,EAASI,MAAQ,EAErCJ,KAED,CACNX,KAAK,aACHO,UAAWA,GACRF,IAGT,KAAKP,EAOH,OANAS,EAAUO,KAAI,SAACH,GACb,OAAIA,EAASC,UAAYN,EAAOM,SAAWN,EAAOU,OAAS,EAClDL,EAASI,MAAQT,EAAOU,MAE1BL,KAED,CACNX,KAAK,aACHO,UAAWA,GACRF,IAGT,QACE,OAAOA,IElDXY,YDAa,WAAoD,IAA/BZ,EAA8B,uDAAtBN,EAAcO,EAAQ,uCAChE,OAAOA,EAAOE,MACZ,KAAKd,EACH,OAAO,eACFW,EADL,CAEEJ,SAAUK,EAAOG,QACjBP,MAA0B,IAAnBI,EAAOG,QAAgB,QAAU,KAE5C,QACE,OAAOJ,M,oEEdAa,EAAY,SAAClB,GAAD,MAAW,CAClCQ,KAAMf,EACNgB,QAAST,I,QCFUmB,E,iLACT,IAAD,EACoGC,KAAKC,MAAzGT,EADA,EACAA,QAASU,EADT,EACSA,SAAUC,EADnB,EACmBA,MAAOR,EAD1B,EAC0BA,MAAOS,EADjC,EACiCA,MAAOC,EADxC,EACwCA,SAAUC,EADlD,EACkDA,WAAYC,EAD9D,EAC8DA,UAAWC,EADzE,EACyEA,UAAWC,EADpF,EACoFA,aACrFC,IAAgBf,EAAQW,EAAWH,IAAQQ,iBACjD,OACE,wBAAIC,UAAW,oBACb,wBAAIA,UAAU,+BACZ,yBAAKA,UAAW,iCACd,yBAAKC,IAAKT,EACLU,IAAI,MACJF,UAAU,2BAEjB,yBAAKA,UAAU,kDACb,yBAAKA,UAAU,wBAAwBV,GACvC,yBAAKU,UAAU,2BAAf,+CAAmDpB,KAGvD,4BACE,yBAAKoB,UAAU,yBAAyBT,EAAxC,WACA,yBAAKS,UAAU,6BAA6BP,EAAQ,UAAMA,EAAN,WAAqB,KAE3E,4BACE,yBAAKO,UAAU,wCACb,yBAAKA,UAAU,sBAAsBG,QAASP,GAA9C,UACA,2BAAOpB,KAAK,OAAOwB,UAAU,wBAAwBhB,MAAOD,EAAOqB,SAAUP,IAC7E,yBAAKG,UAAU,sBAAsBG,QAASR,GAA9C,OAGJ,4BACE,yBAAKK,UAAU,qCAAqCF,EAApD,YAEF,4BACE,4BAAQE,UAAU,+BAA+BG,QAASf,KAAKC,MAAMgB,0B,GAhC1CC,IAAMC,WCC5BpB,G,MAAAA,GCEMqB,E,iLACT,IACDjC,EAAaa,KAAKC,MAAlBd,UACP,OACE,kBAACkC,EAAA,EAAD,CAAOT,UAAW,gBAAiBU,YAAU,GAC3C,+BACE,wBAAIV,UAAW,oBACb,wBAAIA,UAAW,oBAAf,kCACA,wBAAIA,UAAW,oBAAf,4BACA,wBAAIA,UAAW,oBAAf,mCACA,wBAAIA,UAAW,oBAAf,0DACA,wBAAIA,UAAW,uBAGnB,+BACGzB,EAAYa,KAAKC,MAAMsB,WAAWpC,EAAWY,QAAWyB,Q,GAf1BN,IAAMC,WCFhCC,G,MAAAA,G,QCDMK,E,iLACT,IAAD,EAC+CzB,KAAKC,MAApDT,EADA,EACAA,QAASU,EADT,EACSA,SAAUC,EADnB,EACmBA,MAAOR,EAD1B,EAC0BA,MAC3Be,IAAgBf,GAAQW,EAFvB,EACiCA,YACCH,IAAQQ,iBACjD,OACE,yBAAKC,UAAW,yDACd,yBAAKA,UAAU,iFACb,yBAAKA,UAAU,+BAA+BV,GAC9C,yBAAKU,UAAU,kCAAf,+CAA0DpB,IAE5D,yBAAKoB,UAAU,0EACb,yBAAKA,UAAU,gCAAgCF,EAA/C,WACA,yBAAKE,UAAU,gCAAgCjB,EAA/C,yC,GAZuCuB,IAAMC,WCCxCM,G,MAAAA,GCITC,E,2MACJC,oBAAsB,SAACxC,EAAWmB,GAChC,IAAIsB,EAAa,EACjB,OAAKzC,GACDA,EAAU0C,OAAS,IAAGD,EAAazC,EAAaA,EAAU2C,QAAO,SAACC,EAAMC,GAAP,OAAgB1B,EAAWyB,EAAK5B,QAAU4B,EAAKpC,MAAUW,EAAW0B,EAAI7B,QAAU6B,EAAIrC,SAAW,IAC7I,IAArBR,EAAU0C,SAAcD,EAActB,EAAWnB,EAAU,GAAGgB,QAAWhB,EAAU,GAAGQ,OAEnFiC,GAJgBA,G,EAMzBK,kBAAoB,SAACpD,EAAUsB,GAAX,OAAqBA,EAAQtB,G,EACjDqD,oBAAsB,SAAC/C,GACrB,OAAIA,GAAaA,EAAU0C,OAAS,EAAU1C,EAAU2C,QAAO,SAACC,EAAMI,GAAP,OAAiBJ,EAAKpC,QAASwC,EAAKxC,SAC/FR,GAAkC,IAArBA,EAAU0C,OAAqB1C,EAAU,GAAGQ,MACtD,G,wEAEC,IAAD,SACsDK,KAAKC,MAA3Dd,EADA,EACAA,UAAWmB,EADX,EACWA,WAAY8B,EADvB,EACuBA,WAAYvD,EADnC,EACmCA,SAAUC,EAD7C,EAC6CA,MAChD8C,EAAa5B,KAAK2B,oBAAoBxC,EAAWmB,GAC/C+B,EAAexD,EAAWmB,KAAKiC,kBAAkBpD,EAAU+C,GAAc,EAEzEU,EADatC,KAAKkC,oBAAoB/C,GACd,IAAM,EAEpC,OADAyC,EAAcA,EAAaA,EAAW/C,EAAYyD,EAEhD,yBAAK1B,UAAW,wBACd,4BAAQA,UAAW,+BAAnB,qDACCzB,EAAYa,KAAKC,MAAMsB,WAAWpC,EAAWsC,QAAuBD,EACrE,yBAAKZ,UAAU,gDACb,yBAAKA,UAAU,8BACb,2BAAOxB,KAAK,OACLwB,UAAU,4BAA4B2B,YAAa,qDACzD,kBAACC,EAAA,EAAD,CAAQ5B,UAAU,0CAA0CG,QAAS,SAAC0B,GAAD,OAAS,EAAKxC,MAAMyC,mBAAmBD,EAAKL,KAAjH,2DAEH,yBAAKxB,UAAU,iDACb,yBAAKA,UAAU,gEACb,yBAAKA,UAAU,sCAAf,wCACA,yBAAKA,UAAU,wCAAwC9B,EAAQ,oGAAH,UAA4BuD,EAA5B,aAE9D,yBAAKzB,UAAU,gEACb,yBAAKA,UAAU,sCAAf,oDACA,yBAAKA,UAAU,wCAAf,KAAyD0B,EAAzD,WAEF,yBAAK1B,UAAU,sDACb,yBAAKA,UAAU,4BAAf,mCACA,yBAAKA,UAAU,8BAA8BgB,EAA7C,YAEF,kBAACY,EAAA,EAAD,CAAQ5B,UAAU,wBAAlB,4G,GA7CcM,IAAMC,WA8DjBwB,eATS,SAAC1D,GAAD,MAAY,CAClCJ,SAAUI,EAAMY,YAAYhB,SAC5BC,MAAOG,EAAMY,YAAYf,UAGA,SAAC8D,GAAD,MAAe,CACxCF,mBAAoB,SAAC9C,EAAOiD,GAAR,OAAkBD,EPtDN,SAACH,EAAKK,GACtCL,EAAIM,iBACJ,IAAMC,EAAQC,SAASC,cAAc,8BAC/BC,EAAYH,EAAMpD,MACxB,OAAIkD,EAAaM,SAASD,IACxBH,EAAMpD,MAAQ,GACP,CACLR,KAAMd,EACNe,QAAS,KAIN,CACLD,KAAMd,EACNe,QAAS,GOwCoCqD,CAAmB9C,EAAOiD,QAG5DF,CAA6CjB,GClE7CA,G,MAAAA,G,iBCaT1C,E,YACJ,WAAYiB,GAAQ,IAAD,8BACjB,4CAAMA,KAIRsB,WAAa,SAAC8B,EAAOC,GAAR,OAAiBD,EAAM3D,KAAI,SAAC6D,GAAD,OAAU,kBAACD,EAAD,iBAAUC,EAAV,CAAgBC,IAAKC,MAAUnD,WAAY,EAAKA,WAAYW,kBAAmB,EAAKhB,MAAMgB,kBAAmBV,UAAW,EAAKN,MAAMM,UAAWC,UAAW,EAAKP,MAAMO,UAAWC,aAAc,EAAKR,MAAMQ,oBALvO,EAMnBH,WAAa,SAACoD,GAAD,OAAYA,EAAOC,OAAO,MAAQC,SAASF,EAAOG,MAAM,KAAKC,KAAK,KAAOF,SAASF,IAJ7F,EAAKzD,MAAM8D,gBACX,EAAK3B,WAAa,CAAC,UAHF,E,sEAQjB,OACE,6BAASxB,UAAW,aAClB,kBAACoD,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,KACE,wBAAItD,UAAW,kBAAf,uGAGJ,kBAACqD,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAKC,GAAI,GACP,kBAAC,EAAD,iBAAiBnE,KAAKC,MAAMrB,KAA5B,CAAkC2C,WAAYvB,KAAKuB,eAErD,kBAAC2C,EAAA,EAAD,CAAKC,GAAI,GACP,kBAAC,EAAD,iBAAiBnE,KAAKC,MAAMrB,KAA5B,CAAkC2C,WAAYvB,KAAKuB,WAAYjB,WAAYN,KAAKM,WAAY8B,WAAYpC,KAAKoC,sB,GAtBzGlB,IAAMC,WA4CTwB,eAbS,SAAC1D,GAAD,MAAY,CAClCL,KAAMK,EAAMD,IAAIJ,SAGS,SAACgE,GAAD,MAAe,CACxCvE,QAAS,SAAC+F,GAAD,OAAUxB,EAAS9C,EAAUsE,KACtCL,cAAe,kBAAMnB,GT/Cc,SAACA,GACpCyB,MAAM,mBACHC,MAAK,SAACC,GAAD,OAAYA,EAAOC,UACxBF,MAAK,SAACC,GAAD,OAAY3B,EAAS9C,EAAUyE,WS6CvCtD,kBAAmB,SAACwB,GAAD,OAASG,ETzBG,SAAC,GAAc,IACxCpD,EADuC,EAAZiF,OACVC,cAAcA,cAAcxB,cAAc,4BAA4ByB,YAAYd,MAAM,MAAM,GACrH,MAAO,CACLzE,KAAMb,EACNkB,OAAQD,GSqB2ByB,CAAkBwB,KACvDlC,UAAW,SAACkC,GAAD,OAASG,ETnBG,SAAC,GAAc,IAChCpD,EAD+B,EAAZiF,OACFC,cAAcA,cAAcA,cAAcxB,cAAc,4BAA4ByB,YAAYd,MAAM,MAAM,GACnI,MAAO,CACLzE,KAAMZ,EACNgB,QAASA,GSekBe,CAAUkC,KACvCjC,UAAW,SAACiC,GAAD,OAASG,ETbG,SAAC,GAAc,IAChCpD,EAD+B,EAAZiF,OACFC,cAAcA,cAAcA,cAAcxB,cAAc,4BAA4ByB,YAAYd,MAAM,MAAM,GACnI,MAAO,CACLzE,KAAMX,EACNe,QAASA,GSSkBgB,CAAUiC,KACvChC,aAAc,SAACgC,GAAD,OAASG,ETPG,SAAC,GAAc,IAAb6B,EAAY,EAAZA,OACtBjF,EAAUiF,EAAOC,cAAcA,cAAcA,cAAcxB,cAAc,4BAA4ByB,YAAYd,MAAM,MAAM,GACnI,MAAO,CACLzE,KAAMV,EACNc,QAASA,EACTI,MAAO6E,EAAO7E,OSEgBa,CAAagC,QAGhCE,CAA6C3D,GCzD7CA,G,MAAAA,GCOT4F,EAAQC,YAAYC,EAAaC,YAAgBC,MACjDC,EACJ,kBAAC,IAAD,CAAUL,MAAOA,GACf,kBAAC,EAAD,OAIJM,IAASC,OAAOF,EAAKhC,SAASC,cAAc,Y","file":"static/js/main.c3ee7c72.chunk.js","sourcesContent":["export const getData = 'getData';\r\nexport const orderPromoSubmit = 'orderPromoSubmit';\r\nexport const itemDelete = 'itemDelete';\r\nexport const itemAdd = 'itemAdd';\r\nexport const itemSub = 'itemSub';\r\nexport const itemChange = 'itemChange';\r\n","import {getData, itemDelete, itemAdd, itemSub, itemChange} from \"./../actions/actionTypes\";\r\n\r\nconst initialState = {\r\n  data: '',\r\n};\r\n\r\nexport default function App(state = initialState, action) {\r\n  let {positions} = state.data;\r\n  switch(action.type) {\r\n    case getData:\r\n      return ({\r\n        ...state,\r\n        data: action.payload,\r\n      });\r\n    case itemDelete:\r\n      positions = positions.filter((position) => position.article !== action.delete);\r\n      return ({\r\n        data: {\r\n          positions: positions[0] ? positions : '',\r\n          ...state,\r\n        }\r\n      });\r\n    case itemAdd:\r\n      positions.map((position) => position.article === action.article ? position.count = +position.count + 1 : +position.count);\r\n      return ({\r\n        data: {\r\n          positions: positions,\r\n        ...state,\r\n        }\r\n      });\r\n    case itemSub:\r\n      positions.map((position) => {\r\n        if (position.article === action.article && position.count > 0) {\r\n          return position.count = +position.count - 1;\r\n        }\r\n        return position;\r\n      });\r\n      return ({\r\n        data: {\r\n          positions: positions,\r\n          ...state,\r\n        }\r\n      });\r\n    case itemChange:\r\n      positions.map((position) => {\r\n        if (position.article === action.article && action.value > -1) {\r\n          return position.count = action.value;\r\n        }\r\n        return position;\r\n      });\r\n      return ({\r\n        data: {\r\n          positions: positions,\r\n          ...state,\r\n        }\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {orderPromoSubmit} from \"./../actions/actionTypes\";\r\n\r\nconst initialState = {\r\n  discount: 0,\r\n  error: '',\r\n};\r\n\r\nexport default function orderResult(state = initialState, action) {\r\n  switch(action.type) {\r\n    case orderPromoSubmit:\r\n      return ({\r\n        ...state,\r\n        discount: action.payload,\r\n        error: action.payload === 0 ? 'error' : '',\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {combineReducers} from 'redux';\r\n\r\nimport App from \"./reducers/app\";\r\nimport orderResult from \"./reducers/orderResult\";\r\n\r\nexport default combineReducers({\r\n  App,\r\n  orderResult\r\n});\r\n","import {getData, orderPromoSubmit, itemDelete, itemAdd, itemSub, itemChange} from \"./actionTypes\";\r\n\r\nexport const onGetData = (data) => ({\r\n  type: getData,\r\n  payload: data\r\n});\r\nexport const onAppInitialize = () => (dispatch) => (() => {\r\n  fetch('/data/data.json')\r\n    .then((result) => result.json())\r\n    .then((result) => dispatch(onGetData(result))\r\n    )\r\n})();\r\nexport const onOrderPromoSubmit = (evt, currentCodes) => {\r\n  evt.preventDefault();\r\n  const input = document.querySelector('.basket__order-promo-input');\r\n  const promoCode = input.value;\r\n  if (currentCodes.includes(promoCode)) {\r\n    input.value = '';\r\n    return {\r\n      type: orderPromoSubmit,\r\n      payload: 0.2\r\n    };\r\n  }\r\n\r\n  return {\r\n    type: orderPromoSubmit,\r\n    payload: 0\r\n  };\r\n};\r\nexport const onItemDeleteClick = ({target}) => {\r\n  const article = target.parentElement.parentElement.querySelector('.basket__product-article').textContent.split(': ')[1];\r\n  return {\r\n    type: itemDelete,\r\n    delete: article,\r\n  }\r\n};\r\nexport const onItemAdd = ({target}) => {\r\n  const article = target.parentElement.parentElement.parentElement.querySelector('.basket__product-article').textContent.split(': ')[1];\r\n  return {\r\n    type: itemAdd,\r\n    article: article,\r\n  }\r\n};\r\nexport const onItemSub = ({target}) => {\r\n  const article = target.parentElement.parentElement.parentElement.querySelector('.basket__product-article').textContent.split(': ')[1];\r\n  return {\r\n    type: itemSub,\r\n    article: article,\r\n  }\r\n};\r\nexport const onItemChange = ({target}) => {\r\n  const article = target.parentElement.parentElement.parentElement.querySelector('.basket__product-article').textContent.split(': ')[1];\r\n  return {\r\n    type: itemChange,\r\n    article: article,\r\n    value: target.value,\r\n  };\r\n};\r\n","import React from \"react\";\r\n\r\nexport default class Product extends React.Component {\r\n  render() {\r\n    const {article, fullName, price, count, photo, oldPrice, glueNumber, onItemAdd, onItemSub, onItemChange} = this.props;\r\n    const resultPrice = (+count * glueNumber(price)).toLocaleString();\r\n    return (\r\n      <tr className={'basket__table-tr'}>\r\n        <td className=\"basket__product-info d-flex\">\r\n          <div className={'basket__product-photo-wrapper'}>\r\n            <img src={photo}\r\n                 alt=\"---\"\r\n                 className=\"basket__product-photo\"/>\r\n          </div>\r\n          <div className=\"basket__product-description d-flex flex-column\">\r\n            <div className=\"basket__product-name\">{fullName}</div>\r\n            <div className=\"basket__product-article\">Артикул: {article}</div>\r\n          </div>\r\n        </td>\r\n        <td>\r\n          <div className=\"basket__product-price\">{price} ₽</div>\r\n          <div className=\"basket__product-old-price\">{oldPrice ? `${oldPrice} ₽` : ''}</div>\r\n        </td>\r\n        <td>\r\n          <div className=\"basket__product-count-wrapper d-flex\">\r\n            <div className=\"basket__product-sub\" onClick={onItemSub}>&mdash;</div>\r\n            <input type=\"text\" className=\"basket__product-count\" value={count} onChange={onItemChange}/>\r\n            <div className=\"basket__product-add\" onClick={onItemAdd}>+</div>\r\n          </div>\r\n        </td>\r\n        <td>\r\n          <div className=\"basket__table-product-final-price\">{resultPrice} ₽</div>\r\n        </td>\r\n        <td>\r\n          <button className=\"basket__table-product-remove\" onClick={this.props.onItemDeleteClick}/>\r\n        </td>\r\n      </tr>\r\n      )\r\n  }\r\n}\r\n","import Product from \"./Product\";\r\nimport './index.scss';\r\n\r\nexport default Product;\r\n","import React from \"react\";\r\nimport {Table} from 'reactstrap';\r\n\r\nimport Product from \"../Product\";\r\n\r\nexport default class ProductList extends React.Component {\r\n  render() {\r\n    const {positions} = this.props;\r\n    return (\r\n      <Table className={'basket__table'} borderless>\r\n        <thead>\r\n          <tr className={'basket__table-tr'}>\r\n            <th className={'basket__table-th'}>Товар</th>\r\n            <th className={'basket__table-th'}>Цена</th>\r\n            <th className={'basket__table-th'}>Кол-во</th>\r\n            <th className={'basket__table-th'}>Стоимость</th>\r\n            <th className={'basket__table-th'} />\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {positions ? this.props.itemRender(positions, Product) : undefined}\r\n        </tbody>\r\n      </Table>\r\n    )\r\n  }\r\n}\r\n","import ProductList from \"./ProductList\";\r\nimport './index.scss';\r\n\r\nexport default ProductList;\r\n","import React from \"react\";\r\n\r\nexport default class OrderResultPosition extends React.Component {\r\n  render() {\r\n    const {article, fullName, price, count, glueNumber} = this.props;\r\n    const resultPrice = (+count * glueNumber(price)).toLocaleString();\r\n    return (\r\n      <div className={'basket__order-position d-flex justify-content-between'}>\r\n        <div className=\"basket__order-position-description d-flex flex-column justify-content-between\">\r\n          <div className=\"basket__order-position-name\">{fullName}</div>\r\n          <div className=\"basket__order-position-article\">Артикул: {article}</div>\r\n        </div>\r\n        <div className=\"basket__order-position-info d-flex flex-column justify-content-between\">\r\n          <div className=\"basket__order-position-price\">{resultPrice} ₽</div>\r\n          <div className=\"basket__order-position-count\">{count} штуки</div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import OrderResultPosition from \"./OrderResultPosition\";\r\nimport './index.scss';\r\n\r\nexport default OrderResultPosition;\r\n","import React from \"react\";\r\nimport {Button} from 'reactstrap';\r\nimport {connect} from 'react-redux';\r\n\r\nimport OrderResultPosition from \"../OrderResultPosition\";\r\nimport {onOrderPromoSubmit} from \"../../Redux/actions/actions\";\r\n\r\nclass OrderResult extends React.Component {\r\n  calculateTotalPrice = (positions, glueNumber) => {\r\n    let totalPrice = 0;\r\n    if (!positions) return totalPrice;\r\n    if (positions.length > 1) totalPrice = positions ? (positions.reduce((prev, cur) => (glueNumber(prev.price) * +prev.count) + (glueNumber(cur.price) * +cur.count))) : '';\r\n    if (positions.length === 1) totalPrice = (glueNumber(positions[0].price) * + positions[0].count);\r\n\r\n    return totalPrice;\r\n  };\r\n  calculateDiscount = (discount, price) => price * discount;\r\n  calculateTotalCount = (positions) => {\r\n    if (positions && positions.length > 1) return positions.reduce((prev, curr) => +prev.count + +curr.count);\r\n    if (positions && positions.length === 1) return positions[0].count;\r\n    return 0;\r\n  };\r\n  render() {\r\n    const {positions, glueNumber, promoCodes, discount, error} = this.props;\r\n    let totalPrice = this.calculateTotalPrice(positions, glueNumber);\r\n    const discountSize = discount ? this.calculateDiscount(discount, totalPrice) : 0;\r\n    const totalCount = this.calculateTotalCount(positions);\r\n    const delivery = totalCount ? 490 : 0;\r\n    totalPrice = (totalPrice - totalPrice*discount) + delivery;\r\n    return (\r\n      <div className={'basket__order-result'}>\r\n        <header className={'basket__order-result-header'}>Ваш заказ</header>\r\n        {positions ? this.props.itemRender(positions, OrderResultPosition) : undefined}\r\n        <div className=\"basket__order-result-info d-flex flex-column\">\r\n          <div className=\"basket__order-promo d-flex\">\r\n            <input type=\"text\"\r\n                   className=\"basket__order-promo-input\" placeholder={'Промокод'}/>\r\n             <Button className=\"basket__order-promo-confirm flex-grow-1\" onClick={(evt) => this.props.onOrderPromoSubmit(evt, promoCodes)}>Применить</Button>\r\n          </div>\r\n          <div className=\"basket__order-result-price d-flex flex-column\">\r\n            <div className=\"basket__order-result-discount d-flex justify-content-between\">\r\n              <div className=\"basket__order-result-discount-text\">Скидка</div>\r\n              <div className=\"basket__order-result-discount-number\">{error ? 'Промокод неверный' : `${discountSize} ₽`}</div>\r\n            </div>\r\n            <div className=\"basket__order-result-delivery d-flex justify-content-between\">\r\n              <div className=\"basket__order-result-delivery-text\">Доставка</div>\r\n              <div className=\"basket__order-result-delivery-number\">+ {delivery}р</div>\r\n            </div>\r\n            <div className=\"basket__order-total d-flex justify-content-between\">\r\n              <div className=\"basket__order-total-text\">Итого:</div>\r\n              <div className=\"basket__order-total-number\">{totalPrice} ₽</div>\r\n            </div>\r\n            <Button className=\"basket__order-submit\">Подтвердить заказ</Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  discount: state.orderResult.discount,\r\n  error: state.orderResult.error,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  onOrderPromoSubmit: (value, codes) => dispatch(onOrderPromoSubmit(value, codes)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OrderResult)\r\n","import OrderResult from \"./OrderResult\";\r\nimport './index.scss';\r\n\r\nexport default OrderResult;\r\n","import React from \"react\";\r\nimport {Container, Row, Col} from \"reactstrap\";\r\nimport {connect} from 'react-redux';\r\n\r\nimport {\r\n  onGetData,\r\n  onAppInitialize,\r\n  onItemDeleteClick,\r\n  onItemAdd,\r\n  onItemSub,\r\n  onItemChange\r\n} from \"../../Redux/actions/actions\";\r\nimport ProductList from \"../ProductList\";\r\nimport OrderResult from \"../OrderResult\";\r\nimport nextId from \"react-id-generator\";\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.props.appInitialize();\r\n    this.promoCodes = ['NY2020'];\r\n  };\r\n  itemRender = (array, Item) => array.map((item) => <Item {...item} key={nextId()} glueNumber={this.glueNumber} onItemDeleteClick={this.props.onItemDeleteClick} onItemAdd={this.props.onItemAdd} onItemSub={this.props.onItemSub} onItemChange={this.props.onItemChange}/>);\r\n  glueNumber = (string) => string.search(/ /g) ? parseInt(string.split(' ').join('')) : parseInt(string);\r\n  render() {\r\n    return (\r\n      <section className={'bs basket'}>\r\n        <Container>\r\n          <Row>\r\n            <Col>\r\n              <h1 className={'basket__header'}>Оформление заказа</h1>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col xs={8}>\r\n              <ProductList {...this.props.data} itemRender={this.itemRender}/>\r\n            </Col>\r\n            <Col xs={4}>\r\n              <OrderResult {...this.props.data} itemRender={this.itemRender} glueNumber={this.glueNumber} promoCodes={this.promoCodes}/>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  data: state.App.data,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  getData: (smth) => dispatch(onGetData(smth)),\r\n  appInitialize: () => dispatch(onAppInitialize()),\r\n  onItemDeleteClick: (evt) => dispatch(onItemDeleteClick(evt)),\r\n  onItemAdd: (evt) => dispatch(onItemAdd(evt)),\r\n  onItemSub: (evt) => dispatch(onItemSub(evt)),\r\n  onItemChange: (evt) => dispatch(onItemChange(evt)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\r\n","import App from \"./app\";\r\nimport './index.scss';\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport {createStore, applyMiddleware} from \"redux\";\r\nimport {Provider} from 'react-redux';\r\nimport rootReducer from './Redux/rootReducer';\r\nimport reduxThunk from 'redux-thunk';\r\n\r\nimport App from \"./components/App\";\r\n\r\nconst store = createStore(rootReducer, applyMiddleware(reduxThunk));\r\nconst app = (\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>\r\n);\r\n\r\nReactDOM.render(app, document.querySelector('#root'));\r\n"],"sourceRoot":""}