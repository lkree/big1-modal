(this["webpackJsonpbootstrap-test"]=this["webpackJsonpbootstrap-test"]||[]).push([[0],{26:function(e,t,a){e.exports=a(42)},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(15),o=a.n(c),l=(a(31),a(13)),s=a(14),i=a(12),u="getData",m="orderPromoSubmit",d="itemDelete",p="itemAdd",b="itemSub",_="itemChange",f={data:""};var E={discount:0,error:""};var h=Object(l.c)({App:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,a=e.data.positions;switch(t.type){case u:return Object(i.a)({},e,{data:t.payload});case d:return a=a.filter((function(e){return e.article!==t.delete})),{data:Object(i.a)({positions:a[0]?a:""},e)};case p:return a.map((function(e){return e.article===t.article?e.count=+e.count+1:+e.count})),{data:Object(i.a)({positions:a},e)};case b:return a.map((function(e){return e.article===t.article&&e.count>0?e.count=+e.count-1:e})),{data:Object(i.a)({positions:a},e)};case _:return a.map((function(e){return e.article===t.article&&t.value>-1?e.count=t.value:e})),{data:Object(i.a)({positions:a},e)};default:return e}},orderResult:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(i.a)({},e,{discount:t.payload,error:0===t.payload?"error":""});default:return e}}}),v=a(24),k=a(6),N=a(7),j=a(10),y=a(8),O=a(9),g=a(44),x=a(45),C=a(46),I=function(e){return{type:u,payload:e}},S=a(43),w=function(e){function t(){return Object(k.a)(this,t),Object(j.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.article,a=e.fullName,r=e.price,c=e.count,o=e.photo,l=e.oldPrice,s=e.glueNumber,i=e.onItemAdd,u=e.onItemSub,m=e.onItemChange,d=(+c*s(r)).toLocaleString();return n.a.createElement("tr",{className:"basket__table-tr"},n.a.createElement("td",{className:"basket__product-info d-flex"},n.a.createElement("div",{className:"basket__product-photo-wrapper"},n.a.createElement("img",{src:o,alt:"---",className:"basket__product-photo"})),n.a.createElement("div",{className:"basket__product-description d-flex flex-column"},n.a.createElement("div",{className:"basket__product-name"},a),n.a.createElement("div",{className:"basket__product-article"},"\u0410\u0440\u0442\u0438\u043a\u0443\u043b: ",t))),n.a.createElement("td",null,n.a.createElement("div",{className:"basket__product-price"},r," \u20bd"),n.a.createElement("div",{className:"basket__product-old-price"},l?"".concat(l," \u20bd"):"")),n.a.createElement("td",null,n.a.createElement("div",{className:"basket__product-count-wrapper d-flex"},n.a.createElement("div",{className:"basket__product-sub",onClick:u},"\u2014"),n.a.createElement("input",{type:"text",className:"basket__product-count",value:c,onChange:m}),n.a.createElement("div",{className:"basket__product-add",onClick:i},"+"))),n.a.createElement("td",null,n.a.createElement("div",{className:"basket__table-product-final-price"},d," \u20bd")),n.a.createElement("td",null,n.a.createElement("button",{className:"basket__table-product-remove",onClick:this.props.onItemDeleteClick})))}}]),t}(n.a.Component),D=(a(37),w),R=function(e){function t(){return Object(k.a)(this,t),Object(j.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props.positions;return n.a.createElement(S.a,{className:"basket__table",borderless:!0},n.a.createElement("thead",null,n.a.createElement("tr",{className:"basket__table-tr"},n.a.createElement("th",{className:"basket__table-th"},"\u0422\u043e\u0432\u0430\u0440"),n.a.createElement("th",{className:"basket__table-th"},"\u0426\u0435\u043d\u0430"),n.a.createElement("th",{className:"basket__table-th"},"\u041a\u043e\u043b-\u0432\u043e"),n.a.createElement("th",{className:"basket__table-th"},"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"),n.a.createElement("th",{className:"basket__table-th"}))),n.a.createElement("tbody",null,e?this.props.itemRender(e,D):void 0))}}]),t}(n.a.Component),A=(a(38),R),q=a(47),P=function(e){function t(){return Object(k.a)(this,t),Object(j.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.article,a=e.fullName,r=e.price,c=e.count,o=(+c*(0,e.glueNumber)(r)).toLocaleString();return n.a.createElement("div",{className:"basket__order-position d-flex justify-content-between"},n.a.createElement("div",{className:"basket__order-position-description d-flex flex-column justify-content-between"},n.a.createElement("div",{className:"basket__order-position-name"},a),n.a.createElement("div",{className:"basket__order-position-article"},"\u0410\u0440\u0442\u0438\u043a\u0443\u043b: ",t)),n.a.createElement("div",{className:"basket__order-position-info d-flex flex-column justify-content-between"},n.a.createElement("div",{className:"basket__order-position-price"},o," \u20bd"),n.a.createElement("div",{className:"basket__order-position-count"},c," \u0448\u0442\u0443\u043a\u0438")))}}]),t}(n.a.Component),T=(a(39),P),z=function(e){function t(){var e,a;Object(k.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(j.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(n)))).calculateTotalPrice=function(e,t){var a=0;return e?(e.length>1&&(a=e?e.reduce((function(e,a){return t(e.price)*+e.count+t(a.price)*+a.count})):""),1===e.length&&(a=t(e[0].price)*+e[0].count),a):a},a.calculateDiscount=function(e,t){return t*e},a.calculateTotalCount=function(e){return e&&e.length>1?e.reduce((function(e,t){return+e.count+ +t.count})):e&&1===e.length?e[0].count:0},a}return Object(O.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.positions,r=t.glueNumber,c=t.promoCodes,o=t.discount,l=t.error,s=this.calculateTotalPrice(a,r),i=o?this.calculateDiscount(o,s):0,u=this.calculateTotalCount(a)?490:0;return s=s-s*o+u,n.a.createElement("div",{className:"basket__order-result"},n.a.createElement("header",{className:"basket__order-result-header"},"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437"),a?this.props.itemRender(a,T):void 0,n.a.createElement("div",{className:"basket__order-result-info d-flex flex-column"},n.a.createElement("div",{className:"basket__order-promo d-flex"},n.a.createElement("input",{type:"text",className:"basket__order-promo-input",placeholder:"\u041f\u0440\u043e\u043c\u043e\u043a\u043e\u0434"}),n.a.createElement(q.a,{className:"basket__order-promo-confirm flex-grow-1",onClick:function(t){return e.props.onOrderPromoSubmit(t,c)}},"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c")),n.a.createElement("div",{className:"basket__order-result-price d-flex flex-column"},n.a.createElement("div",{className:"basket__order-result-discount d-flex justify-content-between"},n.a.createElement("div",{className:"basket__order-result-discount-text"},"\u0421\u043a\u0438\u0434\u043a\u0430"),n.a.createElement("div",{className:"basket__order-result-discount-number"},l?"\u041f\u0440\u043e\u043c\u043e\u043a\u043e\u0434 \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439":"".concat(i," \u20bd"))),n.a.createElement("div",{className:"basket__order-result-delivery d-flex justify-content-between"},n.a.createElement("div",{className:"basket__order-result-delivery-text"},"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"),n.a.createElement("div",{className:"basket__order-result-delivery-number"},"+ ",u,"\u0440")),n.a.createElement("div",{className:"basket__order-total d-flex justify-content-between"},n.a.createElement("div",{className:"basket__order-total-text"},"\u0418\u0442\u043e\u0433\u043e:"),n.a.createElement("div",{className:"basket__order-total-number"},s," \u20bd")),n.a.createElement(q.a,{className:"basket__order-submit"},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"))))}}]),t}(n.a.Component),J=Object(s.b)((function(e){return{discount:e.orderResult.discount,error:e.orderResult.error}}),(function(e){return{onOrderPromoSubmit:function(t,a){return e(function(e,t){e.preventDefault();var a=document.querySelector(".basket__order-promo-input"),r=a.value;return t.includes(r)?(a.value="",{type:m,payload:.2}):{type:m,payload:0}}(t,a))}}}))(z),L=(a(40),J),Y=a(25),B=a.n(Y),F=function(e){function t(e){var a;return Object(k.a)(this,t),(a=Object(j.a)(this,Object(y.a)(t).call(this,e))).itemRender=function(e,t){return e.map((function(e){return n.a.createElement(t,Object.assign({},e,{key:B()(),glueNumber:a.glueNumber,onItemDeleteClick:a.props.onItemDeleteClick,onItemAdd:a.props.onItemAdd,onItemSub:a.props.onItemSub,onItemChange:a.props.onItemChange}))}))},a.glueNumber=function(e){return e.search(/ /g)?parseInt(e.split(" ").join("")):parseInt(e)},a.props.appInitialize(),a.promoCodes=["NY2020"],a}return Object(O.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return n.a.createElement("section",{className:"bs basket"},n.a.createElement(g.a,null,n.a.createElement(x.a,null,n.a.createElement(C.a,null,n.a.createElement("h1",{className:"basket__header"},"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"))),n.a.createElement(x.a,null,n.a.createElement(C.a,{xs:8},n.a.createElement(A,Object.assign({},this.props.data,{itemRender:this.itemRender}))),n.a.createElement(C.a,{xs:4},n.a.createElement(L,Object.assign({},this.props.data,{itemRender:this.itemRender,glueNumber:this.glueNumber,promoCodes:this.promoCodes}))))))}}]),t}(n.a.Component),G=Object(s.b)((function(e){return{data:e.App.data}}),(function(e){return{getData:function(t){return e(I(t))},appInitialize:function(){return e((function(e){fetch("./data/data.json").then((function(e){return e.json()})).then((function(t){return e(I(t))}))}))},onItemDeleteClick:function(t){return e(function(e){var t=e.target.parentElement.parentElement.querySelector(".basket__product-article").textContent.split(": ")[1];return{type:d,delete:t}}(t))},onItemAdd:function(t){return e(function(e){var t=e.target.parentElement.parentElement.parentElement.querySelector(".basket__product-article").textContent.split(": ")[1];return{type:p,article:t}}(t))},onItemSub:function(t){return e(function(e){var t=e.target.parentElement.parentElement.parentElement.querySelector(".basket__product-article").textContent.split(": ")[1];return{type:b,article:t}}(t))},onItemChange:function(t){return e(function(e){var t=e.target,a=t.parentElement.parentElement.parentElement.querySelector(".basket__product-article").textContent.split(": ")[1];return{type:_,article:a,value:t.value}}(t))}}}))(F),H=(a(41),G),K=Object(l.d)(h,Object(l.a)(v.a)),M=n.a.createElement(s.a,{store:K},n.a.createElement(H,null));o.a.render(M,document.querySelector("#root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.c3ee7c72.chunk.js.map
